{"version":2,"kind":"Notebook","sha256":"3fd61f355d8f2c25ffacd2564ba04562b9774bfad33e53d6b3dac5f134e895ac","slug":"notebooks.example-workflows.echo-top-height","location":"/notebooks/example-workflows/echo_top_height.ipynb","dependencies":[],"frontmatter":{"title":"Echo top height calculation from NEXRAD PPI volume data:","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Zachary Sherman","given":"Zachary","family":"Sherman"},"name":"Zachary Sherman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Milind Sharma","given":"Milind","family":"Sharma"},"name":"Milind Sharma","id":"contributors-myst-generated-uid-2"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/radar-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"abbreviations":{"ARM":"Atmospheric Radiation Measurement"},"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/radar-cookbook/blob/main/notebooks/example-workflows/echo_top_height.ipynb","exports":[{"format":"ipynb","filename":"echo_top_height.ipynb","url":"/radar-cookbook/build/echo_top_height-109037db0f37afa3e2d73ac00e3e9443.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"An echo top is the radar indicated top of an area of precipitation. This notebook demonstrates how to calculate the echo top height (ETH) in a NEXRAD PPI volume scan to determine the maximum elevation angle at which a certain reflectivity threshold is exceeded.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yUkmNIlJYF"}],"key":"oeaCnplhhl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This example uses the echo top height (ETH) calculation code written by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uKyHnY6ifR"},{"type":"link","url":"https://github.com/vlouf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Valentin Louf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"deRNX1ejqy"}],"urlSource":"https://github.com/vlouf","error":true,"key":"tQKYohgcPb"},{"type":"text","value":", available at this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Zf3pSZIIt1"},{"type":"link","url":"https://github.com/vlouf/eth_radar.git","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"github repository","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LB2dsfLhxf"}],"urlSource":"https://github.com/vlouf/eth_radar.git","error":true,"key":"p5bJcTjpHh"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CDTQVO4ASj"}],"key":"A91EQENb4n"}],"visibility":"show","key":"bWzwG3CMY2"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"drtA2Uel4s"}],"key":"bbJZlqInfo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sXZuipfLBT"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"NUnRV9jYRB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The notebook applies the modified ETH algorithm proposed by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WAFV0qWdiM"},{"type":"link","url":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Lakshmanan et al. (2013)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NXq9cuq8jg"}],"urlSource":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","key":"OIsivwKxdE"},{"type":"text","value":" to a NEXRAD PPI volume scan.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eYWvX7phim"}],"key":"rXuNbHMLSP"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The modified algorithm comprises these steps:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"lKgr98W3DI"}],"key":"YaTMZm3Zkj"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Find the maximum elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"l6NaQTLBh3"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"xiKdbeqtxB"},{"type":"text","value":") where reflectivity (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zZ0U7bhnNU"},{"type":"inlineMath","value":"Z_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"njztDa6CsS"},{"type":"text","value":") exceeds the echo-top reflectivity threshold.\nIf ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"BX83vZpbqt"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"FllstjgLxS"},{"type":"text","value":" is not the highest elevation scan in the virtual volume, obtain the reflectivity value (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"O37Js50k9D"},{"type":"inlineMath","value":"Z_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"fthrzjcWXm"},{"type":"text","value":") at the next higher elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"AkAGl5Ome2"},{"type":"inlineMath","value":"\\theta_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"YwTom1P52u"},{"type":"text","value":"). Then, the echo-top height is given by the height of the radar beam at an elevation angle:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"msCqrfyVgG"}],"key":"GadyTTlkPo"}],"key":"N7X2Od0zdS"},{"type":"math","value":"\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>Z</mi><mi>T</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub><mo stretchy=\"false\">)</mo><mfrac><mrow><msub><mi>θ</mi><mi>b</mi></msub><mo>−</mo><msub><mi>θ</mi><mi>a</mi></msub></mrow><mrow><msub><mi>Z</mi><mi>b</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub></mrow></mfrac><mo>+</mo><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2074em;vertical-align:-0.836em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>","enumerator":"1","key":"ZpqpyHXfGp"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"CtL3YwDFrY"},{"type":"inlineMath","value":"Z_T","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"PkVhFq2Lkb"},{"type":"text","value":" is the threshold value (e.g., 0 dBZ, 18 dBZ) used to compute the echo top.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ODSANoHLB0"}],"key":"HpVTfPiUMq"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"If ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"pxu4IDu6od"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"cBrQRwpPL6"},{"type":"text","value":" is the highest elevation scan available, set ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"eXZcF3YBPH"},{"type":"inlineMath","value":"\\theta_{T} = \\theta_{b} + \\beta/2","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><msub><mi>θ</mi><mi>b</mi></msub><mo>+</mo><mi>β</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\theta_{T} = \\theta_{b} + \\beta/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord\">/2</span></span></span></span>","key":"v8byegBpTT"},{"type":"text","value":", where ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"juMSsp9glK"},{"type":"inlineMath","value":"\\beta","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span>","key":"SJeHcPnEjz"},{"type":"text","value":" is the half-power beamwidth. This condition is met far away from the radar if higher-elevation scans have shorter ranges than a base “surveillance” scan and very close to the radar if the highest-elevation scan does not sample the top of the cloud. Under these circumstances, ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"qhyh6gLW3K"},{"type":"inlineMath","value":"\\theta_{T}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"KHphpqzaRL"},{"type":"text","value":" is set to be the top of the beam containing dBZ ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Wdm1xMQKJ9"},{"type":"inlineMath","value":"\\geq Z_T","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\geq Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"NaXwnmcdHL"},{"type":"text","value":"; that is, the traditional echo-top algorithm is followed when there are no data available from a higher-elevation scan.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"c0PHBQMI2P"}],"key":"RpwBpSy142"}],"key":"SVlB9Yd9l1"}],"key":"ZTfJrC4KN9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AyzaB7LtrP"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"BTHFkMN788"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"S5V5tw0tpk"}],"key":"xfZxcy9e3Y"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EGtamgqSJZ"}],"key":"YLKn5llDZe"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ds8isoiYJF"}],"key":"ySH6D6nWVs"}],"key":"KcdRV3fodB"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"p3KVAagtuP"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","key":"UKEY3uTHvg"}],"key":"sMOoPvp4D8"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"G5w6hQIC1C"}],"key":"vmdKGxRMyB"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"r7BbhiFbGp"}],"key":"dBZPRZimgo"}],"key":"zwg161eGZy"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/cartopy/cartopy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Intro to Cartopy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"YRNvJJJnco"}],"urlSource":"https://foundations.projectpythia.org/core/cartopy/cartopy","key":"VZazcki7se"}],"key":"sB7nYldllE"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Vz6ieOxFJg"}],"key":"xAo7xxHYLQ"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Geospatial plotting","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"K3SUWeluQ9"}],"key":"NGoRgUcQkr"}],"key":"FoROIgkkBS"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"/notebooks/foundations/pyart-basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"d5WTeJWCdM"}],"urlSource":"../foundations/pyart-basics","dataUrl":"/notebooks.foundations.pyart-basics.json","internal":true,"protocol":"file","key":"AMhODKIWzI"}],"key":"PoBtq5zL4G"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"R1m49va80D"}],"key":"qlpt5HQvVV"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"IO/Visualization","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UQj37OU55i"}],"key":"I1RXylaW0K"}],"key":"YX6xYfjeOc"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://numba.pydata.org/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Numba","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"LwXCJdbDrd"}],"urlSource":"https://numba.pydata.org/","key":"xRWxNrbhWe"}],"key":"OWxF5JvZ7a"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fA6nMbmBWT"}],"key":"tQgWe8aYlM"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Familiarity with vectorization/optimization of Python functions","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"PdICZkE3H5"}],"key":"i6or4zc51L"}],"key":"mb6bhlAa2s"}],"key":"agG6oWdYux"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"yvt9clP1gy"}],"key":"zXxFIOST1t"},{"type":"text","value":": 25 minutes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NdCys5fHuA"}],"key":"l7BAjmOZau"}],"key":"HOa11rFexy"}],"key":"MD6JX5Juc9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yf1tAqd81O"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"gulJKkZ8Es"}],"key":"CHkpJqk3dg"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pyart\nimport numpy as np\nfrom echotop import cloud_top_height, grid_cloud_top\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs","visibility":"show","key":"qhbuqXF5wh"},{"type":"output","id":"QCGcfJKg-7T4VvNNqEkli","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"visibility":"show","key":"qWzibtVwc1"}],"visibility":"show","key":"WH1PhpArIE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define our function to compute ETH on a uniform x-y grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DcBt4IsnVP"}],"identifier":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","label":"Define our function to compute ETH on a uniform x-y grid","html_id":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","implicit":true,"key":"HlBAdokDdi"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The input file can be a Next Generation Weather Radar (NEXRAD) archive file from Amazon Web Services. We will remotely access  this file and use a reflectivity threshold ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nlymtSEfMw"},{"type":"inlineCode","value":"eth_thld","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rk05auETOU"},{"type":"text","value":" to define our echo tops.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ozMQ5Bleqt"}],"key":"VxetJzNY4O"}],"key":"Z0gyYTxEJB"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def compute_eth(infile, eth_thld=0):\n    \"\"\"\n    Compute the Echo Top Height on a grid\n    \n    Parameters\n    ==========\n    infile (str): Filename of NEXRAD Level 2 Archive file. The files hosted by\n    at the NOAA National Climate Data Center [1]_ as well as on the\n    UCAR THREDDS Data Server [2]_ have been tested. Other NEXRAD\n    Level 2 Archive files may or may not work. Message type 1 file\n    and message type 31 files are supported.\n    \n    eth_thld (float): Reflectivity threshold for which we want to compute \n    the echo top height.\n        \n    Returns:\n    ========\n    cth_grid: ndarray <x, y>\n        Echo top height on a grid of dimension (x, y).  \n        \n    References\n    ----------\n    .. [1] http://www.ncdc.noaa.gov/\n    .. [2] http://thredds.ucar.edu/thredds/catalog.html\n    \"\"\"\n    # Reading NEXRAD L2 data stored on AWS cloud\n    \n    radar = pyart.io.read_nexrad_archive(infile)\n\n    r = radar.range['data']\n    azimuth = radar.azimuth['data']\n    elevation = radar.elevation['data']\n    refl = np.array(radar.fields['reflectivity']['data'])\n    st_sweep = radar.sweep_start_ray_index['data']\n    ed_sweep = radar.sweep_end_ray_index['data']\n\n    # Compute ETH. The 'echotop' package uses @jit decorator to optimize \n    # the 'cloud_top_height' function\n    cth = cloud_top_height(r, azimuth, elevation, st_sweep, ed_sweep, refl, eth_thld=eth_thld)\n\n    # Grid data\n    th = 450 - azimuth[slice(st_sweep[0], ed_sweep[0] + 1)]\n    th[th < 0] += 360\n\n    R, A = np.meshgrid(r, th)\n    x = R * np.cos(np.pi * A / 180)\n    y = R * np.sin(np.pi * A / 180)\n\n    xgrid = np.arange(-MAX_RANGE, MAX_RANGE + RANGE_STEP / 2, RANGE_STEP).astype(np.int32)\n    [X, Y] = np.meshgrid(xgrid, xgrid)\n    cth_grid = grid_cloud_top(\n        cth, x, y, X, Y, nnearest=24, maxdist=2500\n    )  # nearest=24 should be enough to sample out to 2500m on a 1000m grid\n    cth_grid = np.ma.masked_invalid(cth_grid).astype(np.int32).filled(FILLVALUE)\n\n    return cth_grid","visibility":"show","key":"r2qusNuojo"},{"type":"output","id":"65vo8oz5Go5go1AtZVCC2","data":[],"visibility":"show","key":"ZwgIbOhzdO"}],"visibility":"show","key":"UBLCaxV4GE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read and plot reflectivity and velocity fields for a sample file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J1urJShvIs"}],"identifier":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","label":"Read and plot reflectivity and velocity fields for a sample file","html_id":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","implicit":true,"key":"Ymdapkd4ws"}],"key":"p5CPmht90h"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"aws_nexrad_level2_file = (\n    \"s3://noaa-nexrad-level2/2022/03/22/KHGX/KHGX20220322_120125_V06\"\n)\n\nradar = pyart.io.read_nexrad_archive(aws_nexrad_level2_file)\n\n\nfig = plt.figure(figsize=(12, 4))\ndisplay = pyart.graph.RadarMapDisplay(radar)\n\nax = plt.subplot(121, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"reflectivity\",\n    sweep=0,\n    ax=ax,\n    colorbar_label=\"Equivalent Relectivity ($Z_{e}$) \\n (dBZ)\",\n    vmin=-20,\n    vmax=60,\n)\n\nax = plt.subplot(122, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"velocity\",\n    sweep=1,\n    ax=ax,\n    colorbar_label=\"Radial Velocity ($V_{r}$) \\n (m/s)\",\n    vmin=-70,\n    vmax=70,\n)","visibility":"show","key":"nPCsjPssMJ"},{"type":"output","id":"P8AjTuJJxQ9Im799rTIVO","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1200x400 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"51ec4bd1a315b019a4107dcfba3654f9","path":"/radar-cookbook/build/51ec4bd1a315b019a4107dcfba3654f9.png"}}}],"visibility":"show","key":"EOZYSUCRmB"}],"visibility":"show","key":"hFl4I7LSui"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define some global constants and compute the ETH on a horizontally uniform grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xCP2kvIjrG"}],"identifier":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","label":"Define some global constants and compute the ETH on a horizontally uniform grid","html_id":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","implicit":true,"key":"XrIxPSB3mI"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"These constants are required by the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fmxxkPfxIE"},{"type":"inlineCode","value":"compute_eth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"v3ctxuGmnU"},{"type":"text","value":" function to grid the data from polar coordinates to a horizontally uniform grid. These three constants are defined as:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zmn9SRIZUo"}],"key":"b6O0bbi1Iw"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"FILLVALUE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"v1GqsNzOsI"},{"type":"text","value":" (Value to replace missing data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qtR4z3fkMO"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yLrMmEUmTZ"},{"type":"inlineCode","value":"RANGE_STEP","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nC40POVJld"},{"type":"text","value":" (Uniform horizontal grid spacing in x and y dimensions)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BAB3hvkRSJ"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pj9GE9pwnI"},{"type":"inlineCode","value":"MAX_RANGE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fGEFCkiJ1z"},{"type":"text","value":" (Maximum range up to which ETH to be calculated from gridded data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TpaEZGcT4p"}],"key":"bXL9XtbYTC"}],"key":"NJwDob3kDh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"FILLVALUE: int = -9999 \nRANGE_STEP: int = 1000 \nMAX_RANGE: float = 250e3 \n\ncth_grid = compute_eth(aws_nexrad_level2_file, eth_thld=20)","visibility":"show","key":"eruVeSBD0Z"},{"type":"output","id":"RLkovXFrsah0LT-XLotY8","data":[],"visibility":"show","key":"Ep3zpD96JF"}],"visibility":"show","key":"du2B87V78p"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the gridded echo/cloud top height using matplotlib","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TpiHvoeUTO"}],"identifier":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","label":"Plot the gridded echo/cloud top height using matplotlib","html_id":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","implicit":true,"key":"ea4QkUsSrB"}],"key":"TvotpQ8IWw"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"p = plt.pcolormesh(cth_grid,\n                   vmin=0,\n                   vmax=15000,\n                   cmap='ChaseSpectral')\n\nplt.colorbar(mappable=p)","visibility":"show","key":"ChE7BjNrt4"},{"type":"output","id":"8w7c0PO2cEH3kd4WO8zSN","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"0036095cdc068c51dcebad2e9a82223c","path":"/radar-cookbook/build/0036095cdc068c51dcebad2e9a82223c.png"}}}],"visibility":"show","key":"Grnvs06AzH"}],"visibility":"show","key":"X6e5BnL1zZ"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K3wKJ7YzZa"}],"key":"tndKd3nwP6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VYJUueRgTV"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"HgkEyP8qoM"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this example, we walked through how to access ","key":"Jj2R7yNfZh"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"PCWCDgsBJZ"}],"key":"ljlSpTTpjE"},{"type":"text","value":" data from a field campaign in Texas, plot a quick look of the RHI scan data, and grid our RHI data from native (polar) coordinates to a uniform range-height Caretsian grid.","key":"cGERqzfaGj"}],"key":"OONN4rafZ2"}],"key":"pRMhNCYtx8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"okbqdYBgmN"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"dyZ7Y4WU2P"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"link","url":"https://registry.opendata.aws/noaa-nexrad/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"NOAA NEXRAD on AWS","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Zl7HnfJjZy"}],"urlSource":"https://registry.opendata.aws/noaa-nexrad/","key":"zWPGvTNWMM"}],"key":"IT4huYRzVq"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Read NEXRAD on AWS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hbOo0ynfEf"}],"urlSource":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","key":"c4MrzXlXsv"}],"key":"CX8aPs55Vs"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Py-ART:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"j9BOmyByYj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus, J.J. & Collis, S.M., (2016). The Python ","key":"p7G5MhCgZw"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"qRAUFxvcUn"}],"key":"ol8fAnHk4L"},{"type":"text","value":" Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. Journal of Open Research Software. 4(1), p.e25. DOI: ","key":"zVrQNPMFPc"},{"type":"cite","url":"http://doi.org/10.5334/jors.119","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus & Collis (2016)","key":"i0Ca1UzTdN"}],"kind":"narrative","label":"Helmus_2016","identifier":"http://doi.org/10.5334/jors.119","enumerator":"1","key":"HteNCTlFr4"}],"key":"FDJZnfc4Dy"}],"key":"HrwAcxrrz4"}],"key":"J31Q64vdyO"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Echo-top height algorithm:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"wylpql7V0A"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An improved method for estimating radar echo-top height. Weather and Forecasting, 28(2), 481-488. DOI: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SEU9GW5JIk"},{"type":"cite","url":"https://doi.org/10.1175/WAF-D-12-00084.1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan ","key":"nqaR86mJzi"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"BZdP5SjObX"}],"key":"Y03hso4fO8"},{"type":"text","value":" (2013)","key":"t9Rditf02s"}],"kind":"narrative","label":"Lakshmanan_2013","identifier":"https://doi.org/10.1175/WAF-D-12-00084.1","enumerator":"2","key":"Hd80RTLNPu"}],"key":"VYCGF2kJdD"}],"key":"S8UspHDjcf"}],"key":"EGBdvlrIGN"}],"key":"YGCIdwkwV7"}],"key":"ngM7ncIjjd"}],"key":"WwkDbp1W24"},"references":{"cite":{"order":["Helmus_2016","Lakshmanan_2013"],"data":{"Helmus_2016":{"label":"Helmus_2016","enumerator":"1","doi":"10.5334/jors.119","html":"Helmus, J. J., & Collis, S. M. (2016). The Python ARM Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. <i>Journal of Open Research Software</i>, <i>4</i>(1), 25. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5334/jors.119\">10.5334/jors.119</a>","url":"https://doi.org/10.5334/jors.119"},"Lakshmanan_2013":{"label":"Lakshmanan_2013","enumerator":"2","doi":"10.1175/waf-d-12-00084.1","html":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An Improved Method for Estimating Radar Echo-Top Height. <i>Weather and Forecasting</i>, <i>28</i>(2), 481–488. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1175/waf-d-12-00084.1\">10.1175/waf-d-12-00084.1</a>","url":"https://doi.org/10.1175/waf-d-12-00084.1"}}}},"footer":{"navigation":{"prev":{"title":"2D objective analysis of weather radar RHI scan: Fast Barnes Interpolation Example","url":"/notebooks/example-workflows/fastbarnes-interpolation-rhi","group":"Example Workflows"}}},"domain":"http://localhost:3000"}