{"version":2,"kind":"Notebook","sha256":"3fd61f355d8f2c25ffacd2564ba04562b9774bfad33e53d6b3dac5f134e895ac","slug":"notebooks.example-workflows.echo-top-height","location":"/notebooks/example-workflows/echo_top_height.ipynb","dependencies":[],"frontmatter":{"title":"Echo top height calculation from NEXRAD PPI volume data:","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Zachary Sherman","given":"Zachary","family":"Sherman"},"name":"Zachary Sherman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Milind Sharma","given":"Milind","family":"Sharma"},"name":"Milind Sharma","id":"contributors-myst-generated-uid-2"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/radar-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"abbreviations":{"ARM":"Atmospheric Radiation Measurement"},"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/radar-cookbook/blob/main/notebooks/example-workflows/echo_top_height.ipynb","exports":[{"format":"ipynb","filename":"echo_top_height.ipynb","url":"/radar-cookbook/build/echo_top_height-9ba9dbe85d1367ed3054bb724f2fc84a.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"An echo top is the radar indicated top of an area of precipitation. This notebook demonstrates how to calculate the echo top height (ETH) in a NEXRAD PPI volume scan to determine the maximum elevation angle at which a certain reflectivity threshold is exceeded.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zOVVZR6tpU"}],"key":"Hhbj7NUvM8"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This example uses the echo top height (ETH) calculation code written by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vwZgQx6qTd"},{"type":"link","url":"https://github.com/vlouf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Valentin Louf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rYhCyDfqGb"}],"urlSource":"https://github.com/vlouf","error":true,"key":"ZHT6eoaUts"},{"type":"text","value":", available at this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"V7YigOM1wA"},{"type":"link","url":"https://github.com/vlouf/eth_radar.git","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"github repository","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kNuNONRBp0"}],"urlSource":"https://github.com/vlouf/eth_radar.git","error":true,"key":"hbSpoidLFe"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VQU6IJnArX"}],"key":"yTb5lNqndS"}],"visibility":"show","key":"etHLRtierF"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uEgrpgeAKV"}],"key":"ifrcvzSug2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RdR0P71e9k"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"IhFTlxqcaj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The notebook applies the modified ETH algorithm proposed by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OrDBF3R5jC"},{"type":"link","url":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Lakshmanan et al. (2013)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LBKF97UYJ6"}],"urlSource":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","key":"NrTcmIFY2m"},{"type":"text","value":" to a NEXRAD PPI volume scan.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rVz2hQ79pi"}],"key":"ltijUe2vd2"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The modified algorithm comprises these steps:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fYBCzLv3tZ"}],"key":"L3lYv92CF1"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Find the maximum elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gYVVNoXhhR"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"u1uXHpAnho"},{"type":"text","value":") where reflectivity (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Poy2SurlT4"},{"type":"inlineMath","value":"Z_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"u9Liy6QV13"},{"type":"text","value":") exceeds the echo-top reflectivity threshold.\nIf ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"lHcyE8eobi"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"m3z9iwz0kU"},{"type":"text","value":" is not the highest elevation scan in the virtual volume, obtain the reflectivity value (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zAF9nFxL7I"},{"type":"inlineMath","value":"Z_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"J6CjAexy8z"},{"type":"text","value":") at the next higher elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"IC0y8l63RD"},{"type":"inlineMath","value":"\\theta_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"rGXLmMWQyz"},{"type":"text","value":"). Then, the echo-top height is given by the height of the radar beam at an elevation angle:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dMLwfJr3SV"}],"key":"Bve3ZmOYs0"}],"key":"utlWF8WdPF"},{"type":"math","value":"\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>Z</mi><mi>T</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub><mo stretchy=\"false\">)</mo><mfrac><mrow><msub><mi>θ</mi><mi>b</mi></msub><mo>−</mo><msub><mi>θ</mi><mi>a</mi></msub></mrow><mrow><msub><mi>Z</mi><mi>b</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub></mrow></mfrac><mo>+</mo><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2074em;vertical-align:-0.836em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>","enumerator":"1","key":"KLWbI9sSRO"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"YbzCN5GD4r"},{"type":"inlineMath","value":"Z_T","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"nFALQRci9i"},{"type":"text","value":" is the threshold value (e.g., 0 dBZ, 18 dBZ) used to compute the echo top.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"NtP4Bzf0RN"}],"key":"tiakaf4jXC"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"If ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"DMQHNjbQRL"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"TbOyL5Yd5j"},{"type":"text","value":" is the highest elevation scan available, set ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"EUhSB1BrX9"},{"type":"inlineMath","value":"\\theta_{T} = \\theta_{b} + \\beta/2","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><msub><mi>θ</mi><mi>b</mi></msub><mo>+</mo><mi>β</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\theta_{T} = \\theta_{b} + \\beta/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord\">/2</span></span></span></span>","key":"rhMgc45Y6c"},{"type":"text","value":", where ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"BfTRcblBvk"},{"type":"inlineMath","value":"\\beta","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span>","key":"nMdWogJCU7"},{"type":"text","value":" is the half-power beamwidth. This condition is met far away from the radar if higher-elevation scans have shorter ranges than a base “surveillance” scan and very close to the radar if the highest-elevation scan does not sample the top of the cloud. Under these circumstances, ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ZcloWbU3sW"},{"type":"inlineMath","value":"\\theta_{T}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"ibrGPlWgJB"},{"type":"text","value":" is set to be the top of the beam containing dBZ ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"HHOJMZ8gVI"},{"type":"inlineMath","value":"\\geq Z_T","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\geq Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"r63VliGWnj"},{"type":"text","value":"; that is, the traditional echo-top algorithm is followed when there are no data available from a higher-elevation scan.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"TyWH38PjPC"}],"key":"CcU9iPrPJo"}],"key":"p7eiRWAF3X"}],"key":"FhP8BqUcTB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vnPTgb9C3n"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"UZrC27pAc6"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Uc3VJxNvar"}],"key":"mTUVdUMqxv"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HNIVVjPtZw"}],"key":"V5RZNkJT8V"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HqZA6XlWDi"}],"key":"iyQUbcMh62"}],"key":"g601nFDt4N"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"quoxOV0vBp"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics","key":"MR7kxtn4yv"}],"key":"dWxqJn9XWj"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gHYBgmdz1c"}],"key":"e3YpHmspEg"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hoeP6WHovA"}],"key":"YVc0zwua44"}],"key":"azzv5ftMCu"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/cartopy/cartopy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Intro to Cartopy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"PJTl1ATwJH"}],"urlSource":"https://foundations.projectpythia.org/core/cartopy/cartopy","key":"OnyMKqCVnf"}],"key":"GJ1nKkqMAy"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"E5HWluUVvM"}],"key":"d4BvTLgSea"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Geospatial plotting","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qF9jKUGnSG"}],"key":"oLhiPAmBTR"}],"key":"vEZOsM7LAZ"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"/notebooks/foundations/pyart-basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fxH3565BAy"}],"urlSource":"../foundations/pyart-basics","dataUrl":"/notebooks.foundations.pyart-basics.json","internal":true,"protocol":"file","key":"JQIkTD7RUY"}],"key":"ZZy047FNZp"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"AYsKccIW0g"}],"key":"i5YdC81jBb"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"IO/Visualization","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wVI9F41THw"}],"key":"COMqePqhkX"}],"key":"JE9TDRa7Kq"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://numba.pydata.org/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Numba","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"AnpkpfRm8y"}],"urlSource":"https://numba.pydata.org/","key":"Qc49N8cVAx"}],"key":"RHgfwyN4RD"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"KKhFs2Wqwf"}],"key":"zfVLxKmjFZ"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Familiarity with vectorization/optimization of Python functions","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"RGMPGF2eNS"}],"key":"XjcOoeiki0"}],"key":"TPcnWm04ke"}],"key":"vDaLmxVoYm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"zIdc35Vs25"}],"key":"G8kN6UQr9o"},{"type":"text","value":": 25 minutes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ZItaRfc2Ac"}],"key":"dvq4W5aerV"}],"key":"jz2JvryBr2"}],"key":"HTtld28Xga"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qy0bb3yQwq"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"ErZp46GDER"}],"key":"cndtm58GLH"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pyart\nimport numpy as np\nfrom echotop import cloud_top_height, grid_cloud_top\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs","visibility":"show","key":"gdOOLtVjxO"},{"type":"output","id":"UlbgubmzgibsBSvvz3wWF","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"visibility":"show","key":"ZrCDyNZ6qZ"}],"visibility":"show","key":"bsHACbGaKd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define our function to compute ETH on a uniform x-y grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mjL3ei7An9"}],"identifier":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","label":"Define our function to compute ETH on a uniform x-y grid","html_id":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","implicit":true,"key":"j6KMQKpYLP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The input file can be a Next Generation Weather Radar (NEXRAD) archive file from Amazon Web Services. We will remotely access  this file and use a reflectivity threshold ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PtOslJUM9H"},{"type":"inlineCode","value":"eth_thld","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"e7doMww5zd"},{"type":"text","value":" to define our echo tops.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"q4X7Cu3WQi"}],"key":"ZlBsXtH1LR"}],"key":"p8KtMirbQ0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def compute_eth(infile, eth_thld=0):\n    \"\"\"\n    Compute the Echo Top Height on a grid\n    \n    Parameters\n    ==========\n    infile (str): Filename of NEXRAD Level 2 Archive file. The files hosted by\n    at the NOAA National Climate Data Center [1]_ as well as on the\n    UCAR THREDDS Data Server [2]_ have been tested. Other NEXRAD\n    Level 2 Archive files may or may not work. Message type 1 file\n    and message type 31 files are supported.\n    \n    eth_thld (float): Reflectivity threshold for which we want to compute \n    the echo top height.\n        \n    Returns:\n    ========\n    cth_grid: ndarray <x, y>\n        Echo top height on a grid of dimension (x, y).  \n        \n    References\n    ----------\n    .. [1] http://www.ncdc.noaa.gov/\n    .. [2] http://thredds.ucar.edu/thredds/catalog.html\n    \"\"\"\n    # Reading NEXRAD L2 data stored on AWS cloud\n    \n    radar = pyart.io.read_nexrad_archive(infile)\n\n    r = radar.range['data']\n    azimuth = radar.azimuth['data']\n    elevation = radar.elevation['data']\n    refl = np.array(radar.fields['reflectivity']['data'])\n    st_sweep = radar.sweep_start_ray_index['data']\n    ed_sweep = radar.sweep_end_ray_index['data']\n\n    # Compute ETH. The 'echotop' package uses @jit decorator to optimize \n    # the 'cloud_top_height' function\n    cth = cloud_top_height(r, azimuth, elevation, st_sweep, ed_sweep, refl, eth_thld=eth_thld)\n\n    # Grid data\n    th = 450 - azimuth[slice(st_sweep[0], ed_sweep[0] + 1)]\n    th[th < 0] += 360\n\n    R, A = np.meshgrid(r, th)\n    x = R * np.cos(np.pi * A / 180)\n    y = R * np.sin(np.pi * A / 180)\n\n    xgrid = np.arange(-MAX_RANGE, MAX_RANGE + RANGE_STEP / 2, RANGE_STEP).astype(np.int32)\n    [X, Y] = np.meshgrid(xgrid, xgrid)\n    cth_grid = grid_cloud_top(\n        cth, x, y, X, Y, nnearest=24, maxdist=2500\n    )  # nearest=24 should be enough to sample out to 2500m on a 1000m grid\n    cth_grid = np.ma.masked_invalid(cth_grid).astype(np.int32).filled(FILLVALUE)\n\n    return cth_grid","visibility":"show","key":"xZi77PJ2Dj"},{"type":"output","id":"wQ6QqpVl4ivB43OlEe5K6","data":[],"visibility":"show","key":"uHNHd8q4NG"}],"visibility":"show","key":"YEThgAg0OG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read and plot reflectivity and velocity fields for a sample file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W7hvXBc42Z"}],"identifier":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","label":"Read and plot reflectivity and velocity fields for a sample file","html_id":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","implicit":true,"key":"BYhr6Mpav1"}],"key":"KgXACJoe2A"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"aws_nexrad_level2_file = (\n    \"s3://noaa-nexrad-level2/2022/03/22/KHGX/KHGX20220322_120125_V06\"\n)\n\nradar = pyart.io.read_nexrad_archive(aws_nexrad_level2_file)\n\n\nfig = plt.figure(figsize=(12, 4))\ndisplay = pyart.graph.RadarMapDisplay(radar)\n\nax = plt.subplot(121, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"reflectivity\",\n    sweep=0,\n    ax=ax,\n    colorbar_label=\"Equivalent Relectivity ($Z_{e}$) \\n (dBZ)\",\n    vmin=-20,\n    vmax=60,\n)\n\nax = plt.subplot(122, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"velocity\",\n    sweep=1,\n    ax=ax,\n    colorbar_label=\"Radial Velocity ($V_{r}$) \\n (m/s)\",\n    vmin=-70,\n    vmax=70,\n)","visibility":"show","key":"gNkzZJIvDy"},{"type":"output","id":"bJNsu4I2C4OJ2UHX840P0","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1200x400 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"51ec4bd1a315b019a4107dcfba3654f9","path":"/radar-cookbook/build/51ec4bd1a315b019a4107dcfba3654f9.png"}}}],"visibility":"show","key":"zudmeyCmeU"}],"visibility":"show","key":"HebMFiqlEq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define some global constants and compute the ETH on a horizontally uniform grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T4oF7Y24VD"}],"identifier":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","label":"Define some global constants and compute the ETH on a horizontally uniform grid","html_id":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","implicit":true,"key":"PnJsmMKAEU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"These constants are required by the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AENHLybRDU"},{"type":"inlineCode","value":"compute_eth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"piZha7xiNN"},{"type":"text","value":" function to grid the data from polar coordinates to a horizontally uniform grid. These three constants are defined as:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YG5zRDR6UI"}],"key":"PGP5VLqCqq"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"FILLVALUE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QX04belLNb"},{"type":"text","value":" (Value to replace missing data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IFV1QPgXTz"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ANdtnxb5oE"},{"type":"inlineCode","value":"RANGE_STEP","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JBpQwe5bDk"},{"type":"text","value":" (Uniform horizontal grid spacing in x and y dimensions)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OZ0cHMaWvV"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"M9pcVqOuR2"},{"type":"inlineCode","value":"MAX_RANGE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IglpxSNavj"},{"type":"text","value":" (Maximum range up to which ETH to be calculated from gridded data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"l96Tu4NABw"}],"key":"LtQXloW6K7"}],"key":"mi28XpsfkO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"FILLVALUE: int = -9999 \nRANGE_STEP: int = 1000 \nMAX_RANGE: float = 250e3 \n\ncth_grid = compute_eth(aws_nexrad_level2_file, eth_thld=20)","visibility":"show","key":"JrjJTq5Bs9"},{"type":"output","id":"wb7WwgsvLzeQNv7mWz0xg","data":[],"visibility":"show","key":"ze8NvM6rwx"}],"visibility":"show","key":"f46ViVrRz0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the gridded echo/cloud top height using matplotlib","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dTfcP0nKcY"}],"identifier":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","label":"Plot the gridded echo/cloud top height using matplotlib","html_id":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","implicit":true,"key":"iFvWY8aP5R"}],"key":"c6wWi0h0rz"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"p = plt.pcolormesh(cth_grid,\n                   vmin=0,\n                   vmax=15000,\n                   cmap='ChaseSpectral')\n\nplt.colorbar(mappable=p)","visibility":"show","key":"uYaokvw6KH"},{"type":"output","id":"V7gKhFa-klf--DGI0M17H","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"0036095cdc068c51dcebad2e9a82223c","path":"/radar-cookbook/build/0036095cdc068c51dcebad2e9a82223c.png"}}}],"visibility":"show","key":"uJZUqVTWQx"}],"visibility":"show","key":"XeBZeo2Heg"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YkbvepCdMH"}],"key":"FIU4Whq6wd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qM6URsGRgF"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"FKSelSUEe1"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this example, we walked through how to access ","key":"GKVxvOjZoy"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"ZX7S6PHAcL"}],"key":"hrXY5xU0cg"},{"type":"text","value":" data from a field campaign in Texas, plot a quick look of the RHI scan data, and grid our RHI data from native (polar) coordinates to a uniform range-height Caretsian grid.","key":"a1xMs3RdrE"}],"key":"zvzO4RsKOA"}],"key":"xoznzZSEPN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QqeSa2Z50g"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"CjeO75ThEn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"link","url":"https://registry.opendata.aws/noaa-nexrad/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"NOAA NEXRAD on AWS","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"h7xv4TP750"}],"urlSource":"https://registry.opendata.aws/noaa-nexrad/","key":"yVHkB5ZtbS"}],"key":"aFBkI70T5u"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Read NEXRAD on AWS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CPMXJ4V3K4"}],"urlSource":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","key":"Ym2iuMM4JH"}],"key":"aqiSw9DPFe"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Py-ART:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"sySx2G526w"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus, J.J. & Collis, S.M., (2016). The Python ","key":"U9IglJqund"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"eQniubjAGp"}],"key":"BL1qUHGKTo"},{"type":"text","value":" Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. Journal of Open Research Software. 4(1), p.e25. DOI: ","key":"h2w2zuCtfJ"},{"type":"cite","url":"http://doi.org/10.5334/jors.119","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus & Collis (2016)","key":"oUeAFUPGhJ"}],"kind":"narrative","label":"Helmus_2016","identifier":"http://doi.org/10.5334/jors.119","enumerator":"1","key":"bJ8UW0S77z"}],"key":"Ls4qZ2kfnf"}],"key":"pUgVQbl7cx"}],"key":"I7bc2EDHZj"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Echo-top height algorithm:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"LLMolsfh2P"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An improved method for estimating radar echo-top height. Weather and Forecasting, 28(2), 481-488. DOI: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FFTShw4oil"},{"type":"cite","url":"https://doi.org/10.1175/WAF-D-12-00084.1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan ","key":"oqRZUEW1Lq"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"XdGQAZLm30"}],"key":"NsubVV230V"},{"type":"text","value":" (2013)","key":"uBShnZ7lhO"}],"kind":"narrative","label":"Lakshmanan_2013","identifier":"https://doi.org/10.1175/WAF-D-12-00084.1","enumerator":"2","key":"NQ98sv7T6c"}],"key":"wbiweYuXEi"}],"key":"Di321dtuxt"}],"key":"UPC3050yrp"}],"key":"vWNmYelMOW"}],"key":"MKDbtiRgt1"}],"key":"gbBnxYC8Ne"},"references":{"cite":{"order":["Helmus_2016","Lakshmanan_2013"],"data":{"Helmus_2016":{"label":"Helmus_2016","enumerator":"1","doi":"10.5334/jors.119","html":"Helmus, J. J., & Collis, S. M. (2016). The Python ARM Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. <i>Journal of Open Research Software</i>, <i>4</i>(1), 25. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5334/jors.119\">10.5334/jors.119</a>","url":"https://doi.org/10.5334/jors.119"},"Lakshmanan_2013":{"label":"Lakshmanan_2013","enumerator":"2","doi":"10.1175/waf-d-12-00084.1","html":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An Improved Method for Estimating Radar Echo-Top Height. <i>Weather and Forecasting</i>, <i>28</i>(2), 481–488. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1175/waf-d-12-00084.1\">10.1175/waf-d-12-00084.1</a>","url":"https://doi.org/10.1175/waf-d-12-00084.1"}}}},"footer":{"navigation":{"prev":{"title":"2D objective analysis of weather radar RHI scan: Fast Barnes Interpolation Example","url":"/notebooks/example-workflows/fastbarnes-interpolation-rhi","group":"Example Workflows"}}},"domain":"http://localhost:3000"}