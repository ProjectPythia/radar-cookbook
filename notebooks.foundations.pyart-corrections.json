{"version":2,"kind":"Notebook","sha256":"c010acc5df5447d761eb48cdc8d345e1c4827881496968c6de49acea3ad0f335","slug":"notebooks.foundations.pyart-corrections","location":"/notebooks/foundations/pyart-corrections.ipynb","dependencies":[],"frontmatter":{"title":"Py-ART Corrections","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Zachary Sherman","given":"Zachary","family":"Sherman"},"name":"Zachary Sherman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Milind Sharma","given":"Milind","family":"Sharma"},"name":"Milind Sharma","id":"contributors-myst-generated-uid-2"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/radar-cookbook","copyright":"2024","affiliations":[{"id":"University at Albany (State University of New York)","name":"University at Albany (State University of New York)"},{"id":"UCAR/NCAR","name":"UCAR/NCAR"}],"abbreviations":{"ARM":"Atmospheric Radiation Measurement"},"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/radar-cookbook/blob/main/notebooks/foundations/pyart-corrections.ipynb","thumbnail":"/radar-cookbook/build/arm_logo-3eddcd5ecd7c4e602d768f26a3f9bc25.png","exports":[{"format":"ipynb","filename":"pyart-corrections.ipynb","url":"/radar-cookbook/build/pyart-corrections-f5b7f198c44df0aa76faa88b1d01b3e3.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"image","url":"/radar-cookbook/build/arm_logo-3eddcd5ecd7c4e602d768f26a3f9bc25.png","alt":"ARM Logo","width":500,"key":"n9T1K2190E","urlSource":"../images/logos/arm_logo.png"}],"key":"wDQRGwIDbY"}],"key":"dDVAKhMDsm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Py-ART Corrections","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sVYsS7Wb0q"}],"identifier":"py-art-corrections","label":"Py-ART Corrections","html_id":"py-art-corrections","implicit":true,"key":"Xo32eBbkB1"},{"type":"thematicBreak","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ulMDORgkp6"}],"key":"bEHxJ75pLV"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PK3u2b1rTx"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"ofCJK1sxsr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Within this notebook, we will cover:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"W2ZhvAqswe"}],"key":"pSVxsmy5Fs"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to radar aliasing.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fA295EA4lT"}],"key":"b3agrBg0VK"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Calculation of velocity texture using Py-ART","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FHMyc4x1jB"}],"key":"lPMlRTRNoW"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Dealiasing the velocity field","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Ei6KeNxEld"}],"key":"YdX2dEgR7W"}],"key":"DYCY3c5yZv"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"T9v8UsTtjv"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"l9FFe0FLcX"},{"type":"table","position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"JTfBSOxaAD"}],"key":"DgWezE7bjH"},{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"E58LGoLmbZ"}],"key":"CM5UDUW0jr"},{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NjIRmkFSln"}],"key":"lEwKUrWMIS"}],"key":"JgCmEHJ1jO"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"/notebooks/foundations/pyart-basics","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"hFKOxGyRdS"}],"urlSource":"pyart-basics","dataUrl":"/notebooks.foundations.pyart-basics.json","internal":true,"protocol":"file","key":"GsAHLz9E7K"}],"key":"ujI1MJ8qO3"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"O2jpHC6ME0"}],"key":"Dgf6MxeCao"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic features","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"RnTFcoTOEI"}],"key":"kcJO8QnNwX"}],"key":"c6w7MIKe7z"},{"type":"tableRow","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"LHzEHNV5se"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","key":"tMDkZDxh4P"}],"key":"PySmSoPnu0"},{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"jlOtxc1yVx"}],"key":"yC49U7wGOP"},{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"DRDNowXhVV"}],"key":"lJdC1g7gGN"}],"key":"E1TNw4F0D8"},{"type":"tableRow","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/numpy/numpy-basics.html","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"NumPy Basics","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"DAftzR1F0l"}],"urlSource":"https://foundations.projectpythia.org/core/numpy/numpy-basics.html","key":"IJSphJoRKv"}],"key":"KnFjUWnt3A"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"yCjsM4ng5q"}],"key":"NxhKqturRq"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Basic arrays","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"vnotqi6UU9"}],"key":"OVLDzzWJzv"}],"key":"JmK4hCh3KM"}],"key":"WMG110xSxQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"dNF0avWn7w"}],"key":"MUOTa7jOmm"},{"type":"text","value":": 30 minutes","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"K5DQBVIzuK"}],"key":"V24oCA94Ub"}],"key":"Mt6DXea9PX"},{"type":"thematicBreak","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"vXI4kmAVSJ"}],"visibility":"show","key":"yW6cltvp17"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Y8VF3BFbEg"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"YSSPe5kRKJ"}],"key":"AZn5oE3B4I"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport warnings\n\nimport cartopy.crs as ccrs\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n\nimport pyart\nfrom pyart.testing import get_test_data\n\nwarnings.filterwarnings('ignore')","key":"anx5oztKA8"},{"type":"output","id":"GWZvdxwIgLQCT7PfZaUIs","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"key":"r9jRgk2PZW"}],"key":"xIGu5JROuD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read in the Data and Plot the Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jxUsDSYhBU"}],"identifier":"read-in-the-data-and-plot-the-data","label":"Read in the Data and Plot the Data","html_id":"read-in-the-data-and-plot-the-data","implicit":true,"key":"Su1D0MYOXL"}],"key":"eax09Mflhm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read in a sample file from the Southern Great Plains (SGP) Site","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Iql7fQGfnT"}],"identifier":"read-in-a-sample-file-from-the-southern-great-plains-sgp-site","label":"Read in a sample file from the Southern Great Plains (SGP) Site","html_id":"read-in-a-sample-file-from-the-southern-great-plains-sgp-site","implicit":true,"key":"nypKQtYFxd"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Our data is formatted as an ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"viiKYQXp5W"},{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"mdv","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TFAYqhFR5d"}],"key":"ILL1ws6zOU"},{"type":"text","value":" file, which is the abbreviation for Meteorological Data Volume, a data format developed by the National Center for Atmospheric Research in the early 1990s.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uMmmvcq2YR"}],"key":"PLsJFxfhSG"}],"key":"CGxYhiVrtE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"file = get_test_data('110635.mdv')\nradar = pyart.io.read(file)","key":"QTnHMmPDvP"},{"type":"output","id":"mH2TyMDExpoHq3b6aJgTs","data":[{"output_type":"stream","name":"stderr","text":"Downloading file '110635.mdv' from 'https://adc.arm.gov/pyart/example_data/110635.mdv' to '/home/runner/.cache/pyart-datasets'.\n"},{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mHTTPError\u001b[39m                                 Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[2]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m1\u001b[39m file = \u001b[43mget_test_data\u001b[49m\u001b[43m(\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43m110635.mdv\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m)\u001b[49m\n\u001b[32m      2\u001b[39m radar = pyart.io.read(file)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/radar-cookbook-dev/lib/python3.11/site-packages/pyart/testing/example_data.py:54\u001b[39m, in \u001b[36mget_test_data\u001b[39m\u001b[34m(file)\u001b[39m\n\u001b[32m     42\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mget_test_data\u001b[39m(file):\n\u001b[32m     43\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m     44\u001b[39m \u001b[33;03m    Accesses the desired test data storage\u001b[39;00m\n\u001b[32m     45\u001b[39m \u001b[33;03m    Parameters\u001b[39;00m\n\u001b[32m   (...)\u001b[39m\u001b[32m     52\u001b[39m \u001b[33;03m        Local path to the desired file\u001b[39;00m\n\u001b[32m     53\u001b[39m \u001b[33;03m    \"\"\"\u001b[39;00m\n\u001b[32m---> \u001b[39m\u001b[32m54\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mDATASETS\u001b[49m\u001b[43m.\u001b[49m\u001b[43mfetch\u001b[49m\u001b[43m(\u001b[49m\u001b[43mfile\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdownloader\u001b[49m\u001b[43m=\u001b[49m\u001b[43madd_header_to_download\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/radar-cookbook-dev/lib/python3.11/site-packages/pooch/core.py:589\u001b[39m, in \u001b[36mPooch.fetch\u001b[39m\u001b[34m(self, fname, processor, downloader, progressbar)\u001b[39m\n\u001b[32m    586\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m downloader \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    587\u001b[39m         downloader = choose_downloader(url, progressbar=progressbar)\n\u001b[32m--> \u001b[39m\u001b[32m589\u001b[39m     \u001b[43mstream_download\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    590\u001b[39m \u001b[43m        \u001b[49m\u001b[43murl\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    591\u001b[39m \u001b[43m        \u001b[49m\u001b[43mfull_path\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    592\u001b[39m \u001b[43m        \u001b[49m\u001b[43mknown_hash\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    593\u001b[39m \u001b[43m        \u001b[49m\u001b[43mdownloader\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    594\u001b[39m \u001b[43m        \u001b[49m\u001b[43mpooch\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m    595\u001b[39m \u001b[43m        \u001b[49m\u001b[43mretry_if_failed\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mretry_if_failed\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    596\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    598\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m processor \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    599\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m processor(\u001b[38;5;28mstr\u001b[39m(full_path), action, \u001b[38;5;28mself\u001b[39m)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/radar-cookbook-dev/lib/python3.11/site-packages/pooch/core.py:807\u001b[39m, in \u001b[36mstream_download\u001b[39m\u001b[34m(url, fname, known_hash, downloader, pooch, retry_if_failed)\u001b[39m\n\u001b[32m    803\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m    804\u001b[39m     \u001b[38;5;66;03m# Stream the file to a temporary so that we can safely check its\u001b[39;00m\n\u001b[32m    805\u001b[39m     \u001b[38;5;66;03m# hash before overwriting the original.\u001b[39;00m\n\u001b[32m    806\u001b[39m     \u001b[38;5;28;01mwith\u001b[39;00m temporary_file(path=\u001b[38;5;28mstr\u001b[39m(fname.parent)) \u001b[38;5;28;01mas\u001b[39;00m tmp:\n\u001b[32m--> \u001b[39m\u001b[32m807\u001b[39m         \u001b[43mdownloader\u001b[49m\u001b[43m(\u001b[49m\u001b[43murl\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mtmp\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpooch\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    808\u001b[39m         hash_matches(tmp, known_hash, strict=\u001b[38;5;28;01mTrue\u001b[39;00m, source=\u001b[38;5;28mstr\u001b[39m(fname.name))\n\u001b[32m    809\u001b[39m         shutil.move(tmp, \u001b[38;5;28mstr\u001b[39m(fname))\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/radar-cookbook-dev/lib/python3.11/site-packages/pyart/testing/example_data.py:19\u001b[39m, in \u001b[36madd_header_to_download\u001b[39m\u001b[34m(url, output_file, mypooch)\u001b[39m\n\u001b[32m     17\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34madd_header_to_download\u001b[39m(url, output_file, mypooch):\n\u001b[32m     18\u001b[39m     download = HTTPDownloader(headers=headers)\n\u001b[32m---> \u001b[39m\u001b[32m19\u001b[39m     \u001b[43mdownload\u001b[49m\u001b[43m(\u001b[49m\u001b[43murl\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43moutput_file\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmypooch\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/radar-cookbook-dev/lib/python3.11/site-packages/pooch/downloaders.py:221\u001b[39m, in \u001b[36mHTTPDownloader.__call__\u001b[39m\u001b[34m(self, url, output_file, pooch, check_only)\u001b[39m\n\u001b[32m    219\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m    220\u001b[39m     response = requests.get(url, timeout=timeout, **kwargs)\n\u001b[32m--> \u001b[39m\u001b[32m221\u001b[39m     \u001b[43mresponse\u001b[49m\u001b[43m.\u001b[49m\u001b[43mraise_for_status\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    222\u001b[39m     content = response.iter_content(chunk_size=\u001b[38;5;28mself\u001b[39m.chunk_size)\n\u001b[32m    223\u001b[39m     total = \u001b[38;5;28mint\u001b[39m(response.headers.get(\u001b[33m\"\u001b[39m\u001b[33mcontent-length\u001b[39m\u001b[33m\"\u001b[39m, \u001b[32m0\u001b[39m))\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/radar-cookbook-dev/lib/python3.11/site-packages/requests/models.py:1026\u001b[39m, in \u001b[36mResponse.raise_for_status\u001b[39m\u001b[34m(self)\u001b[39m\n\u001b[32m   1021\u001b[39m     http_error_msg = (\n\u001b[32m   1022\u001b[39m         \u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[38;5;132;01m{\u001b[39;00m\u001b[38;5;28mself\u001b[39m.status_code\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m Server Error: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00mreason\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m for url: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00m\u001b[38;5;28mself\u001b[39m.url\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m\"\u001b[39m\n\u001b[32m   1023\u001b[39m     )\n\u001b[32m   1025\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m http_error_msg:\n\u001b[32m-> \u001b[39m\u001b[32m1026\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m HTTPError(http_error_msg, response=\u001b[38;5;28mself\u001b[39m)\n\n\u001b[31mHTTPError\u001b[39m: 404 Client Error: Not Found for url: https://adc.arm.gov/pyart/example_data/110635.mdv","ename":"HTTPError","evalue":"404 Client Error: Not Found for url: https://adc.arm.gov/pyart/example_data/110635.mdv"}],"key":"MfS96bRKea"}],"key":"yAgkfxtpwQ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a quick-look of reflectivity and velocity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"twbBwsStzL"}],"identifier":"plot-a-quick-look-of-reflectivity-and-velocity","label":"Plot a quick-look of reflectivity and velocity","html_id":"plot-a-quick-look-of-reflectivity-and-velocity","implicit":true,"key":"tQ8e4yfPMg"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We can start by taking a quick look at the reflectivity and velocity fields. Notice how the velocity field is ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mJqNiLOgyt"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"rather messy","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Hx3uDfziRG"}],"key":"adqx2OL57U"},{"type":"text","value":", indicated by the speckles and high/low values directly next to each other","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"islusgzgkv"}],"key":"eTlo1ty2zU"}],"key":"eIDrtrt649"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('reflectivity',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=0,\n                     vmax=60, \n                     projection=ccrs.PlateCarree(),\n                     cmap='HomeyerRainbow')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17, \n                     projection=ccrs.PlateCarree(),\n                     cmap='balance')\nplt.show()","key":"GZ1esJj8dh"},{"type":"output","id":"nOmfb_Gnxu24XJZywFJHo","data":[],"key":"IorSIAh8CL"}],"key":"zskFB1a1y3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dealiasing our Velocity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yl3YdCm8YA"}],"identifier":"dealiasing-our-velocity","label":"Dealiasing our Velocity","html_id":"dealiasing-our-velocity","implicit":true,"key":"MxTploTTUz"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"An Overview of Aliasing","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"x5oXsUFoJN"}],"identifier":"an-overview-of-aliasing","label":"An Overview of Aliasing","html_id":"an-overview-of-aliasing","implicit":true,"key":"pbzotrBCc9"}],"key":"cl4hrbDzPv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The radial velocity measured by the radar is mesasured by detecing the phase shift between the transmitted pulse and the pulse recieved by the radar. However, using this methodology, it is only possible to detect phase shifts within ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TdGvNfRHJ3"},{"type":"inlineMath","value":"\\pm 2\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>±</mo><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">\\pm 2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">±</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"rkqndNaFDJ"},{"type":"text","value":" due to the periodicity of the transmitted wave. Therefore, for example, a phase shift of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w9Rsc7iBRq"},{"type":"inlineMath","value":"3\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">3\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"gYftIrVBXc"},{"type":"text","value":" would erroneously be detected as a phase shift of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c4Io7PTN8A"},{"type":"inlineMath","value":"-\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">-\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"P8tZqLhYR0"},{"type":"text","value":" and give an incorrect value of velocity when retrieved by the radar. This phenomena is called aliasing. The maximium unambious velocity that can be detected by the radar before aliasing occurs is called the Nyquist velocity.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QcNjbiwmPQ"}],"key":"vzfU0efmqf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next example, you will see an example of aliasing occurring, where the values of +15 m/s abruptly transition into a region of -15 m/s, with -5 m/s in the middle of the region around 37 N, 97 W.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pikO61Zbwb"}],"key":"vOQLD88lIQ"}],"key":"fxLRsgEDnV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Velocity Texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uw0ZkEwtOx"}],"identifier":"calculate-velocity-texture","label":"Calculate Velocity Texture","html_id":"calculate-velocity-texture","implicit":true,"key":"wLTPJFG1Ub"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, for dealiasing to work efficiently, we need to use a GateFilter. Notice that, this time, the data shown does not give us a nice gate_id. This is what raw data looks like, and we need to do some preprocessing on the data to remove noise and clutter. Thankfully, Py-ART gives us the capability to do this. As a simple filter in this example, we will first calculate the velocity texture using Py-ART’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Wc1jZSHgHC"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.retrieve.calculate_velocity_texture.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"calculate_velocity_texture","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QySsv217Aq"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.retrieve.calculate_velocity_texture.html","key":"lQIEC8xZAq"},{"type":"text","value":" function. The velocity texture is the standard deviation of velocity surrounding a gate. This will be higher in the presence of noise.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EPksuIoONC"}],"key":"KAKFLvOz0d"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s investigate this function first...","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qZa5z1EWZV"}],"key":"wN6t2nMMLN"}],"key":"Q3Tlft5yy3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"pyart.retrieve.calculate_velocity_texture?","key":"ozWmtr5JWZ"},{"type":"output","id":"q7BE_o4kWI01nQiEBZ7LE","data":[],"key":"EYdHWwgaTv"}],"key":"SxPGb8ENGX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Determining the Right Parameters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"L53FZchJGm"}],"identifier":"determining-the-right-parameters","label":"Determining the Right Parameters","html_id":"determining-the-right-parameters","implicit":true,"key":"A1c4dVJJCG"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"You’ll notice that we need:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ZPiTQH554v"}],"key":"tdCl3fodIx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Our radar object","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IIguC44nBn"}],"key":"LzDsi4S4ut"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The name of our velocity field","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gCVQ6U9Ng4"}],"key":"SDRN5EhGVr"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The number of gates within our window to use to calculate the texture","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HhtTJF5CjY"}],"key":"HZjPHQOHon"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The nyquist velocity","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"POBFQ2W24M"}],"key":"zaxiEPhzoa"}],"key":"g0AIEGYu38"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"We can retrieve the nyquest velocity from our instrument parameters fortunately - using the following syntax!","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ubifSKfZmi"}],"key":"JLxZ6q3Tmr"}],"key":"a5KU84reWr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nyquist_velocity = radar.instrument_parameters[\"nyquist_velocity\"][\"data\"]\nnyquist_velocity","key":"PjEUF6UQSm"},{"type":"output","id":"BO7Dp9oQrShJWCL8LtOTo","data":[],"key":"UNVIzMiTGE"}],"key":"DhoBkwCeuG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"While the nyquist velocity is stored as an array, we see that these are all the same value...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zAPRhnV7qb"}],"key":"bo5RhUVOxN"}],"key":"PZNof5DfLe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"np.unique(nyquist_velocity)","key":"FNyUV7bLrn"},{"type":"output","id":"8cvkfxGRJwD_zpqf_Zl71","data":[],"key":"pcIWt7ITqU"}],"key":"Kywtvbl2wK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s save this single value to a float to use later...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sw2gajcTXu"}],"key":"L0P6P6q6o1"}],"key":"NtqAMnzh35"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nyquist_value = np.unique(nyquist_velocity)[0]","key":"MSLT6X9UjX"},{"type":"output","id":"1y7ilfuru-j88Si4kWUXR","data":[],"key":"baSszCRLl9"}],"key":"mFyK6kI41r"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Velocity Texture and Filter our Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xbHVX8kn7W"}],"identifier":"calculate-velocity-texture-and-filter-our-data","label":"Calculate Velocity Texture and Filter our Data","html_id":"calculate-velocity-texture-and-filter-our-data","implicit":true,"key":"byUhOzVvm6"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now that we have an ide?a of which parameters to pass in, let’s calculate velocity texture!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fC2lGiSLFU"}],"key":"vrXB4CwiIU"}],"key":"TTW4lnLfPM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"vel_texture = pyart.retrieve.calculate_velocity_texture(radar,\n                                                        vel_field='velocity',\n                                                        nyq=nyquist_value)\nvel_texture","key":"odVz5ZMT69"},{"type":"output","id":"5TPIk7y_jlBO1i53waLcv","data":[],"key":"DWEdVCah9L"}],"key":"xgk6v6BhIm"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PfruOOym0f"},{"type":"inlineCode","value":"pyart.retrieve.calculate_velocity_texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rXpmHVmxqR"},{"type":"text","value":" function results in a data dictionary, including the actual data, as well as metadata. We can add this to our ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HQ4iFZoQoE"},{"type":"inlineCode","value":"radar","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PfGkf07tRQ"},{"type":"text","value":" object, by using the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SyrvyeOaQH"},{"type":"inlineCode","value":"radar.add_field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RcD0z2jcJR"},{"type":"text","value":" method, passing the name of our new field (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EAb2creI5v"},{"type":"inlineCode","value":"\"texture\"","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u6isu2MA0w"},{"type":"text","value":"), the data dictionary (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LvMdTn0mxg"},{"type":"inlineCode","value":"vel_texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZtTxaNAo8N"},{"type":"text","value":"), and a clarification that we want to replace the existing velocity texture field if it already exists in our radar object (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XiUSi7rTtt"},{"type":"inlineCode","value":"replace_existing=True","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bxGo9mrs2C"},{"type":"text","value":")","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XfKDlGWRCw"}],"key":"uzwyK7O85l"}],"key":"dUgoMnHuK5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"radar.add_field('texture', vel_texture, replace_existing=True)","key":"HujHWOiC6z"},{"type":"output","id":"2g2HNQ9-b3_e59wfFm5y6","data":[],"key":"SYOcJbbl9I"}],"key":"cjQqs4YClI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Velocity Texture Field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sJaDydoZJF"}],"identifier":"plot-our-velocity-texture-field","label":"Plot our Velocity Texture Field","html_id":"plot-our-velocity-texture-field","implicit":true,"key":"Y2GOyM5EFW"}],"key":"F5XLsvAhEI"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have our velocity texture field added to our radar object, let’s plot it!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l4eFs9EGTG"}],"key":"kriAJ4Yw7N"}],"key":"AAIdfCkRcC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 8])\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('texture',\n                     sweep=0,\n                     resolution='50m',\n                     vmin=0,\n                     vmax=10, \n                     projection=ccrs.PlateCarree(),\n                     cmap='balance')\nplt.show()","key":"JUl56AtPkN"},{"type":"output","id":"Um3w492ahfW14QqLkQEcZ","data":[],"key":"UdShG91ghd"}],"key":"Eu8sxXhyW4"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Determine a Suitable Velocity Texture Threshold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hGpCzY1czn"}],"identifier":"determine-a-suitable-velocity-texture-threshold","label":"Determine a Suitable Velocity Texture Threshold","html_id":"determine-a-suitable-velocity-texture-threshold","implicit":true,"key":"Mea5tpWPVq"}],"key":"nfWzYsrxwT"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a histogram of velocity texture to get a better idea of what values correspond to hydrometeors and what values of texture correspond to artifacts.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"asiex2zHjI"}],"key":"bC1OJeNan2"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the below example, a threshold of 3 would eliminate most of the peak corresponding to noise around 6 while preserving most of the values in the peak of ~0.5 corresponding to hydrometeors.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"trTtpvefsn"}],"key":"dZ0dBB9Btl"}],"key":"IctTmhkB0D"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"hist, bins = np.histogram(radar.fields['texture']['data'],\n                          bins=150)\nbins = (bins[1:]+bins[:-1])/2.0\n\nplt.plot(bins,\n         hist,\n         label='Velocity Texture Frequency')\nplt.axvline(3,\n            color='r',\n            label='Proposed Velocity Texture Threshold')\n\nplt.xlabel('Velocity texture')\nplt.ylabel('Count')\nplt.legend()","key":"WvrzrMIbUW"},{"type":"output","id":"cmUELuoC5wu7Tq6954fQs","data":[],"key":"mwyHQZScYK"}],"key":"ZawmKloxiM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup a Gatefilter Object and Apply our Threshold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"L7Z3ZbX1vJ"}],"identifier":"setup-a-gatefilter-object-and-apply-our-threshold","label":"Setup a Gatefilter Object and Apply our Threshold","html_id":"setup-a-gatefilter-object-and-apply-our-threshold","implicit":true,"key":"hYtVf1ngfY"}],"key":"vZRVVsYBTh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we can set up our GateFilter (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Tetfw7V6aN"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.filters.GateFilter.html#pyart.filters.GateFilter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"pyart.filters.GateFilter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qo5OTVQBnS"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.filters.GateFilter.html#pyart.filters.GateFilter","key":"B0pMKuPwHG"},{"type":"text","value":"), which allows us to easily apply masks and filters to our radar object.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"st9CzuyZju"}],"key":"XQ0SR1l8iD"}],"key":"mWh71UumHz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gatefilter = pyart.filters.GateFilter(radar)\ngatefilter","key":"eMVxCyDR4U"},{"type":"output","id":"d6hZbb3f1A7o8Nulykvze","data":[],"key":"rlmzcuD5Ck"}],"key":"KdRN5qTq7z"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We discovered that a velocity texture threshold of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dUL5yRPNkc"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"only including values below 3","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mpTEyw1FXc"}],"key":"Jig1SOAfzg"},{"type":"text","value":" would be suitable for this dataset, we use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Fbej66vY01"},{"type":"inlineCode","value":".exclude_above","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cFlMgliSm5"},{"type":"text","value":" method, specifying we want to exclude ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BaAzbz5m3e"},{"type":"inlineCode","value":"texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IfVXGgmqAy"},{"type":"text","value":" values above 3.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HPclKsaSYh"}],"key":"n0xIMoiJnb"}],"key":"DaqfC3JvOy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gatefilter.exclude_above('texture', 3)","key":"oQaM5TebU5"},{"type":"output","id":"sTRb004cU0fAj0c9qm4K5","data":[],"key":"El3TsLC4BD"}],"key":"c1YhVOSNnh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Filtered Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bjrQtjYWpQ"}],"identifier":"plot-our-filtered-data","label":"Plot our Filtered Data","html_id":"plot-our-filtered-data","implicit":true,"key":"G0EMrf5niw"}],"key":"zUuOIRIZAj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have created a gatefilter, filtering our data using the velocity texture, let’s plot our data!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HVH8JVPobS"}],"key":"D0xK3NjgZR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We need to pass our gatefilter to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NfCPsRFHWG"},{"type":"inlineCode","value":"plot_ppi_map","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kWiQfER2BK"},{"type":"text","value":" to apply it to our plot.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FOaTrzVKHz"}],"key":"ZjoSznJrJr"}],"key":"gonriXsQch"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot our Unfiltered Data\nfig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Raw Radial Velocity (no filter)',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17,\n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\n\n# Plot our filtered data\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Radial Velocity with Velocity Texture Filter',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17, \n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     gatefilter=gatefilter,\n                     cmap='balance')\nplt.show()","key":"I21dCy1PXI"},{"type":"output","id":"5KHGDcDTOn4NQW65BGsuC","data":[],"key":"KYeVHd0kpu"}],"key":"SFEnSvteaB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dealias the Velocity Using the Region-Based Method","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zVZKR4acy0"}],"identifier":"dealias-the-velocity-using-the-region-based-method","label":"Dealias the Velocity Using the Region-Based Method","html_id":"dealias-the-velocity-using-the-region-based-method","implicit":true,"key":"S1zuAtHAFs"}],"key":"TKS0ktLHpk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"At this point, we can use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LFZ5gkkOCk"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.correct.dealias_region_based.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"dealias_region_based","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XQbWU8mcQW"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.correct.dealias_region_based.html","key":"lJ3iyTeLM2"},{"type":"text","value":" to dealias the velocities and then add the new field to the radar!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O72UKwVEhY"}],"key":"MshJHE8kxI"}],"key":"eqjdsBVaBl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"velocity_dealiased = pyart.correct.dealias_region_based(radar,\n                                                        vel_field='velocity',\n                                                        nyquist_vel=nyquist_value,\n                                                        centered=True,\n                                                        gatefilter=gatefilter)\n\n# Add our data dictionary to the radar object\nradar.add_field('corrected_velocity', velocity_dealiased, replace_existing=True)","key":"TCro3N0Fgl"},{"type":"output","id":"HtyVQw-RRTTmp0ssoCr6b","data":[],"key":"ZDLBrj0AGs"}],"key":"UbbURV88U3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Cleaned, Dealiased Velocities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tAhNXnZesO"}],"identifier":"plot-our-cleaned-dealiased-velocities","label":"Plot our Cleaned, Dealiased Velocities","html_id":"plot-our-cleaned-dealiased-velocities","implicit":true,"key":"oinzuZ9NS5"}],"key":"FIXdIF4O3I"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the new velocities, which now look much more realistic.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RHCdiVVmYg"}],"key":"FGS3b776zG"}],"key":"etY1Ggr9Yv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 8])\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('corrected_velocity',\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30, \n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance',\n                     gatefilter=gatefilter)\nplt.show()","key":"KZiuQ9Qehz"},{"type":"output","id":"ftVyNfF0ct_sl9eIdBc_8","data":[],"key":"ILr4dyn2Vi"}],"key":"lCWOZnS6yy"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compare our Raw Velocity Field to our Dealiased, Cleaned Velocity Field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CbfS1yNzX1"}],"identifier":"compare-our-raw-velocity-field-to-our-dealiased-cleaned-velocity-field","label":"Compare our Raw Velocity Field to our Dealiased, Cleaned Velocity Field","html_id":"compare-our-raw-velocity-field-to-our-dealiased-cleaned-velocity-field","implicit":true,"key":"P2pOI5iDS6"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"As a last comparison, let’s compare our raw, uncorrected velocities with our cleaned velocities, after applying the velocity texture threshold and dealiasing algorithm","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"U92i8Q3b3x"}],"key":"qegZY7Efa0"}],"key":"y1wF2Nz4lq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot our Unfiltered Data\nfig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Raw Radial Velocity (no filter)',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30,\n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\n\n# Plot our filtered, dealiased data\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('corrected_velocity',\n                     title='Radial Velocity with Velocity Texture Filter and Dealiasing',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30, \n                     projection=ccrs.PlateCarree(),\n                     gatefilter=gatefilter,\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\nplt.show()","key":"hdnYCap46W"},{"type":"output","id":"Mna9KJPoF_3xycWu2c7PD","data":[],"key":"x5fRF2y8Pm"}],"key":"FJyiZD16jL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Conclusions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bgBzFrGhdo"}],"identifier":"conclusions","label":"Conclusions","html_id":"conclusions","implicit":true,"key":"NPYfoCiXCA"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this lesson, we walked through how to apply radial velocity corrections to a dataset, filtering based on the velocity texture and using a regional dealiasing algorithm.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ZLazKBKypn"}],"key":"mtwkFuyWJ3"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s Next","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"P66zxtyUph"}],"identifier":"whats-next","label":"What’s Next","html_id":"whats-next","implicit":true,"key":"cKaR4IZQvF"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In the next few notebooks, we walk through gridding radar data and advanced visualization methods!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EqGytT1jOJ"}],"key":"P2zG1aBADC"}],"key":"p8mNCnhZls"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ltNgdafuYF"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"GER9RUZ8ub"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Py-ART essentials links:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b8jXlQxonT"}],"key":"LGOJ9hECnd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"arm-doe.github.io/pyart/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Landing page","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mrd2VeJAi2"}],"urlSource":"arm-doe.github.io/pyart/","key":"oGYn3wf85o"}],"key":"jtQ5j9RaeQ"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/index.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Examples","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"a70n6VjW13"}],"urlSource":"https://arm-doe.github.io/pyart/examples/index.html","key":"i0ySSR7YIX"}],"key":"jWb5NugH0X"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"github.com/ARM-DOE/pyart","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Source Code","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"w4A8VDlxrw"}],"urlSource":"github.com/ARM-DOE/pyart","error":true,"key":"IBQfzdRCiW"}],"key":"fiQZEc3l7k"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"groups.google.com/group/pyart-users/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Mailing list","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DIK7jXHQwb"}],"urlSource":"groups.google.com/group/pyart-users/","key":"olwihCIp3h"}],"key":"w8SBNO4cod"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"github.com/ARM-DOE/pyart/issues","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Issue Tracker","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"LGrrZSXCAX"}],"urlSource":"github.com/ARM-DOE/pyart/issues","error":true,"key":"qEwLUAQsJq"}],"key":"d3kJDmFCFy"}],"key":"lkmRwf2UK4"}],"key":"tErSGdJDK6"}],"key":"pNxIzGoEEN"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Py-ART Basics","url":"/notebooks/foundations/pyart-basics","group":"Radar Software Foundations"},"next":{"title":"Py-ART Gridding","url":"/notebooks/foundations/pyart-gridding","group":"Radar Software Foundations"}}},"domain":"http://localhost:3000"}