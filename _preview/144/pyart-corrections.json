{"version":2,"kind":"Notebook","sha256":"c010acc5df5447d761eb48cdc8d345e1c4827881496968c6de49acea3ad0f335","slug":"pyart-corrections","location":"/notebooks/foundations/pyart-corrections.ipynb","dependencies":[],"frontmatter":{"title":"Py-ART Corrections","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Zachary Sherman","given":"Zachary","family":"Sherman"},"name":"Zachary Sherman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Milind Sharma","given":"Milind","family":"Sharma"},"name":"Milind Sharma","id":"contributors-myst-generated-uid-2"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/radar-cookbook","copyright":"2024","abbreviations":{"ARM":"Atmospheric Radiation Measurement"},"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/radar-cookbook/blob/HEAD/notebooks/foundations/pyart-corrections.ipynb","thumbnail":"/radar-cookbook/build/arm_logo-07bbd7969adc9c8762b054582a3cf736.png","exports":[{"format":"ipynb","filename":"pyart-corrections.ipynb","url":"/radar-cookbook/build/pyart-corrections-434ccee5e5bdd352c9943faec7068a6b.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"image","url":"/radar-cookbook/build/arm_logo-07bbd7969adc9c8762b054582a3cf736.png","alt":"ARM Logo","key":"gIkCsJufQH","urlSource":"../images/logos/arm_logo.png"}],"key":"W1agwayjY4"}],"key":"I3j4BnLFKD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Py-ART Corrections","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rrtxWQh6JV"}],"identifier":"py-art-corrections","label":"Py-ART Corrections","html_id":"py-art-corrections","implicit":true,"key":"yorkURVQa1"},{"type":"thematicBreak","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ccyaAw4308"}],"key":"i3JHu0p432"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nR6BB2cxgT"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"Yes1jyM9qV"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Within this notebook, we will cover:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wvnKAqfiDP"}],"key":"m0SXwFXXOX"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Intro to radar aliasing.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"plCMDfeDb1"}],"key":"Oa0h228qDZ"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Calculation of velocity texture using Py-ART","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TSKCXOyTEl"}],"key":"AugiQnRp2t"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Dealiasing the velocity field","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fCA4kMMpjV"}],"key":"yE1IE6RyIl"}],"key":"Gd0bvICU2H"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jhRTWehnvl"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"kaft10dfwt"},{"type":"table","position":{"start":{"line":10,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"qGNfnVxy0t"}],"key":"b5cBXNAiu8"},{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DKbMFBIf68"}],"key":"kBAXWWfw2b"},{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"wCQRlZ8S6G"}],"key":"fiD1xnvgRn"}],"key":"B7qGU7tOmL"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"/pyart-basics","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"BsC573jVnA"}],"urlSource":"pyart-basics","dataUrl":"/pyart-basics.json","internal":true,"protocol":"file","key":"AKCV4DSI50"}],"key":"N0V6Sq7WNi"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ZnuFWNjkJO"}],"key":"UvnTUdAJAZ"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic features","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"M7jmGmu0zK"}],"key":"G1SGKSo3bK"}],"key":"KQwhcUQ1VY"},{"type":"tableRow","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ZBEDL5zHWD"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","key":"eIzt5dKyjT"}],"key":"PvBEOyf7zl"},{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Qs6cILlcND"}],"key":"oJgxxFIGBf"},{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"UqUxmU9rng"}],"key":"eCB4S8PGM2"}],"key":"Po8By1PnpN"},{"type":"tableRow","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/numpy/numpy-basics.html","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"NumPy Basics","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"kYhuRMH6m3"}],"urlSource":"https://foundations.projectpythia.org/core/numpy/numpy-basics.html","key":"U4Ts2EQiQH"}],"key":"iCDsceqo9y"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"jCz0efcsYG"}],"key":"aOnBO2yQf0"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Basic arrays","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"hByG9XIRYB"}],"key":"WlPOR9QAUZ"}],"key":"ERgAIjwiTk"}],"key":"eBD9xYmyiq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"NIXyLXfkcA"}],"key":"BleoLJWVsy"},{"type":"text","value":": 30 minutes","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"vrzVJeKfeO"}],"key":"hqasVpm94n"}],"key":"tdne1LK8Sg"},{"type":"thematicBreak","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"A6aLc6objs"}],"visibility":"show","key":"qR7z5GNORc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wZyaxQrm7I"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"DygcTXSjXI"}],"key":"SHt031SRCr"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport warnings\n\nimport cartopy.crs as ccrs\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n\nimport pyart\nfrom pyart.testing import get_test_data\n\nwarnings.filterwarnings('ignore')","key":"m0imif2Gqd"},{"type":"output","id":"wuBpwSX8sc0zNOLa5nZzp","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"key":"dGgARTxqYF"}],"key":"fd8cPO2YI3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read in the Data and Plot the Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v8NPHgamkK"}],"identifier":"read-in-the-data-and-plot-the-data","label":"Read in the Data and Plot the Data","html_id":"read-in-the-data-and-plot-the-data","implicit":true,"key":"zsiDN8Y7yX"}],"key":"MP4xGK1Mvt"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read in a sample file from the Southern Great Plains (SGP) Site","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YkkNDVDZeX"}],"identifier":"read-in-a-sample-file-from-the-southern-great-plains-sgp-site","label":"Read in a sample file from the Southern Great Plains (SGP) Site","html_id":"read-in-a-sample-file-from-the-southern-great-plains-sgp-site","implicit":true,"key":"Aa3qhfAz2M"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Our data is formatted as an ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"G9z68QpfeG"},{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"mdv","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fWGlrjAG0m"}],"key":"QJnrJX5Mlw"},{"type":"text","value":" file, which is the abbreviation for Meteorological Data Volume, a data format developed by the National Center for Atmospheric Research in the early 1990s.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"NGIwMhSo43"}],"key":"eqd12xcHUp"}],"key":"lKZRElMDqw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"file = get_test_data('110635.mdv')\nradar = pyart.io.read(file)","key":"bhRSkpRybx"},{"type":"output","id":"87XSxqIfpB-UA9bHX8caY","data":[{"output_type":"stream","name":"stderr","text":"Downloading file '110635.mdv' from 'https://adc.arm.gov/pyart/example_data/110635.mdv' to '/home/runner/.cache/pyart-datasets'.\n"}],"key":"V5H0S20Q3z"}],"key":"o8lXyhLuZR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a quick-look of reflectivity and velocity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x1hzgZaoQf"}],"identifier":"plot-a-quick-look-of-reflectivity-and-velocity","label":"Plot a quick-look of reflectivity and velocity","html_id":"plot-a-quick-look-of-reflectivity-and-velocity","implicit":true,"key":"gPr6tMvTX2"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We can start by taking a quick look at the reflectivity and velocity fields. Notice how the velocity field is ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dGqado3IKa"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"rather messy","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"qGFiW8sttW"}],"key":"k1mgqxwl3z"},{"type":"text","value":", indicated by the speckles and high/low values directly next to each other","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"oyCSp07ihG"}],"key":"DOHwdJuEmq"}],"key":"pQIwu8Qp3j"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('reflectivity',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=0,\n                     vmax=60, \n                     projection=ccrs.PlateCarree(),\n                     cmap='HomeyerRainbow')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17, \n                     projection=ccrs.PlateCarree(),\n                     cmap='balance')\nplt.show()","key":"Z6j7g00ZUo"},{"type":"output","id":"MvVA0rnsIdHBTitWqCLKb","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x1000 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"09481876a21e224249229ba1b78cadf5","path":"/radar-cookbook/build/09481876a21e224249229ba1b78cadf5.png"}}}],"key":"K2kvewgI8O"}],"key":"KoI3HY2lUV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dealiasing our Velocity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mxdtpqilk3"}],"identifier":"dealiasing-our-velocity","label":"Dealiasing our Velocity","html_id":"dealiasing-our-velocity","implicit":true,"key":"h9TLJQIxdy"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"An Overview of Aliasing","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hzb7gfmT8Y"}],"identifier":"an-overview-of-aliasing","label":"An Overview of Aliasing","html_id":"an-overview-of-aliasing","implicit":true,"key":"S7817mqTji"}],"key":"lyJL6ROk6m"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The radial velocity measured by the radar is mesasured by detecing the phase shift between the transmitted pulse and the pulse recieved by the radar. However, using this methodology, it is only possible to detect phase shifts within ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lQwfhezJpR"},{"type":"inlineMath","value":"\\pm 2\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>±</mo><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">\\pm 2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">±</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"XGvecQqqL8"},{"type":"text","value":" due to the periodicity of the transmitted wave. Therefore, for example, a phase shift of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cmQyGW7had"},{"type":"inlineMath","value":"3\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">3\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"bKcK8ZK6q1"},{"type":"text","value":" would erroneously be detected as a phase shift of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FVchPUW4Dn"},{"type":"inlineMath","value":"-\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">-\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"rUI7VbcnB1"},{"type":"text","value":" and give an incorrect value of velocity when retrieved by the radar. This phenomena is called aliasing. The maximium unambious velocity that can be detected by the radar before aliasing occurs is called the Nyquist velocity.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DOAsN5Kxwp"}],"key":"ar3KKvDcJ8"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next example, you will see an example of aliasing occurring, where the values of +15 m/s abruptly transition into a region of -15 m/s, with -5 m/s in the middle of the region around 37 N, 97 W.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XAp2VFoGAj"}],"key":"WizTqOKPqA"}],"key":"BhVDkp3U2B"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Velocity Texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KRobxtPt17"}],"identifier":"calculate-velocity-texture","label":"Calculate Velocity Texture","html_id":"calculate-velocity-texture","implicit":true,"key":"B0qzAkMvae"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, for dealiasing to work efficiently, we need to use a GateFilter. Notice that, this time, the data shown does not give us a nice gate_id. This is what raw data looks like, and we need to do some preprocessing on the data to remove noise and clutter. Thankfully, Py-ART gives us the capability to do this. As a simple filter in this example, we will first calculate the velocity texture using Py-ART’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"S1elzk2OvP"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.retrieve.calculate_velocity_texture.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"calculate_velocity_texture","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NFW18Tcucz"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.retrieve.calculate_velocity_texture.html","key":"QA8pdxV8BJ"},{"type":"text","value":" function. The velocity texture is the standard deviation of velocity surrounding a gate. This will be higher in the presence of noise.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ygrYo5moTy"}],"key":"CEXF83NY7E"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s investigate this function first...","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"LSYMyPZacM"}],"key":"TE5ScUITqe"}],"key":"vg8el4m03q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"pyart.retrieve.calculate_velocity_texture?","key":"MkafYePUeG"},{"type":"output","id":"kpGODbUA0VLHTAA2gojLf","data":[],"key":"tmlMRKH4QZ"}],"key":"iuEUJ6vjE1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Determining the Right Parameters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VzvxZAhRQx"}],"identifier":"determining-the-right-parameters","label":"Determining the Right Parameters","html_id":"determining-the-right-parameters","implicit":true,"key":"ARtoC9ah7v"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"You’ll notice that we need:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KLt5vQRRLL"}],"key":"z9vbyxDOhb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Our radar object","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Kd1MQUM8e8"}],"key":"QVhWcQu66r"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The name of our velocity field","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Z2AVH5cbBl"}],"key":"dKOlaOSjQd"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The number of gates within our window to use to calculate the texture","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VuEZ9V1R8q"}],"key":"R9m99ls9rn"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The nyquist velocity","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"YEk8Ql4MIM"}],"key":"ajCv4m5pnF"}],"key":"XGUH8lbw3F"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"We can retrieve the nyquest velocity from our instrument parameters fortunately - using the following syntax!","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"tewnGkDrJY"}],"key":"ZuOkt7xNCj"}],"key":"uX0THaWsUK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nyquist_velocity = radar.instrument_parameters[\"nyquist_velocity\"][\"data\"]\nnyquist_velocity","key":"PPTXi8cMLQ"},{"type":"output","id":"9jd500uqVMMPSBrWSdA-v","data":[{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"array([16.52468, 16.52468, 16.52468, ..., 16.52468, 16.52468, 16.52468],\n      dtype=float32)","content_type":"text/plain"}}}],"key":"Ro60bDXH5u"}],"key":"c0dvJIxsmr"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"While the nyquist velocity is stored as an array, we see that these are all the same value...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tZ9tD8wV7j"}],"key":"gSCFdeKJEQ"}],"key":"LHKSEuidh1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"np.unique(nyquist_velocity)","key":"aV7GehTo5Y"},{"type":"output","id":"Qi40vLG_gu7gdnfBC2iuS","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"array([16.52468], dtype=float32)","content_type":"text/plain"}}}],"key":"ne1s1krwZq"}],"key":"HeAqpBeSf0"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s save this single value to a float to use later...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CjFuqcC6jx"}],"key":"bnzpoatIVC"}],"key":"c9WllYjBI3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nyquist_value = np.unique(nyquist_velocity)[0]","key":"c5GBROQZWy"},{"type":"output","id":"6WGf2ZY9b_d0Te1U31pdY","data":[],"key":"gn2R2smm5Q"}],"key":"CfBXtUGK2R"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Velocity Texture and Filter our Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wpdq3D6pds"}],"identifier":"calculate-velocity-texture-and-filter-our-data","label":"Calculate Velocity Texture and Filter our Data","html_id":"calculate-velocity-texture-and-filter-our-data","implicit":true,"key":"Z14xoTnBw1"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now that we have an ide?a of which parameters to pass in, let’s calculate velocity texture!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"EChqQ7z00U"}],"key":"mLHwwfbitr"}],"key":"UxgqHGO0nh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"vel_texture = pyart.retrieve.calculate_velocity_texture(radar,\n                                                        vel_field='velocity',\n                                                        nyq=nyquist_value)\nvel_texture","key":"UVdiu7cPFE"},{"type":"output","id":"Wkbr1QHl6KNtb8oFR9BIy","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"{'units': 'meters_per_second',\n 'standard_name': 'texture_of_radial_velocity_of_scatters_away_from_instrument',\n 'long_name': 'Doppler velocity texture',\n 'coordinates': 'elevation azimuth range',\n 'data': array([[5.8774082 , 5.73538228, 1.29254402, ..., 3.09248932, 3.11758189,\n         3.11758189],\n        [5.8774082 , 5.60215107, 1.29254402, ..., 7.30583692, 7.31494978,\n         7.3283932 ],\n        [6.98970645, 5.25008601, 1.93385618, ..., 7.32173353, 7.33318301,\n         7.33770852],\n        ...,\n        [8.27919632, 7.05635664, 5.84890822, ..., 2.72774608, 2.76027457,\n         2.79050846],\n        [7.15030826, 6.57482555, 5.37450144, ..., 1.37623459, 1.40499757,\n         1.42364895],\n        [7.05635664, 6.57482555, 5.37450144, ..., 1.35595468, 1.35852404,\n         1.40499757]])}","content_type":"text/plain"}}}],"key":"TyXEaFmHJ5"}],"key":"tQOK1z44wi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PWOi6y70gx"},{"type":"inlineCode","value":"pyart.retrieve.calculate_velocity_texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ThDyxdekAn"},{"type":"text","value":" function results in a data dictionary, including the actual data, as well as metadata. We can add this to our ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S8L4VgiFkb"},{"type":"inlineCode","value":"radar","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NlVsGZA2RJ"},{"type":"text","value":" object, by using the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Na44bfVTH1"},{"type":"inlineCode","value":"radar.add_field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X8Vlm2F3xC"},{"type":"text","value":" method, passing the name of our new field (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GibnxNaLLE"},{"type":"inlineCode","value":"\"texture\"","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FfEel95pIC"},{"type":"text","value":"), the data dictionary (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QZ86c1nLz5"},{"type":"inlineCode","value":"vel_texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"USHo0qV21X"},{"type":"text","value":"), and a clarification that we want to replace the existing velocity texture field if it already exists in our radar object (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U2A8AFDVYi"},{"type":"inlineCode","value":"replace_existing=True","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nxj2vqHQy0"},{"type":"text","value":")","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EQZwVO6o5T"}],"key":"eYURdCMMGd"}],"key":"tDcw47PemQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"radar.add_field('texture', vel_texture, replace_existing=True)","key":"eYlWNwWioz"},{"type":"output","id":"6egZB4eHJI0eLdFz5CnVu","data":[],"key":"s7vCxheF8p"}],"key":"yqwq6kEdKM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Velocity Texture Field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xcw4XkNOjJ"}],"identifier":"plot-our-velocity-texture-field","label":"Plot our Velocity Texture Field","html_id":"plot-our-velocity-texture-field","implicit":true,"key":"f3HSCptGIN"}],"key":"p7lRf5yJH4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have our velocity texture field added to our radar object, let’s plot it!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B5Qjp68qqY"}],"key":"ERGZxAAfi0"}],"key":"jauJu7DGAG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 8])\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('texture',\n                     sweep=0,\n                     resolution='50m',\n                     vmin=0,\n                     vmax=10, \n                     projection=ccrs.PlateCarree(),\n                     cmap='balance')\nplt.show()","key":"JRJDyFoQDU"},{"type":"output","id":"LF-9SR9lCjOSdht2-phkf","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"84854c6af9150e82b1d2f5c6d0fb2bd4","path":"/radar-cookbook/build/84854c6af9150e82b1d2f5c6d0fb2bd4.png"}}}],"key":"VZX8dVVPJT"}],"key":"n5FZ1ygPY0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Determine a Suitable Velocity Texture Threshold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IYeh2InEJ8"}],"identifier":"determine-a-suitable-velocity-texture-threshold","label":"Determine a Suitable Velocity Texture Threshold","html_id":"determine-a-suitable-velocity-texture-threshold","implicit":true,"key":"bAbvqQHPol"}],"key":"hAEIXixcTi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a histogram of velocity texture to get a better idea of what values correspond to hydrometeors and what values of texture correspond to artifacts.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IrNRSPsKo9"}],"key":"irMUxifS0p"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the below example, a threshold of 3 would eliminate most of the peak corresponding to noise around 6 while preserving most of the values in the peak of ~0.5 corresponding to hydrometeors.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Cv91NcXIaM"}],"key":"YiZrYC2Vh4"}],"key":"j8KzZ9jYlA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"hist, bins = np.histogram(radar.fields['texture']['data'],\n                          bins=150)\nbins = (bins[1:]+bins[:-1])/2.0\n\nplt.plot(bins,\n         hist,\n         label='Velocity Texture Frequency')\nplt.axvline(3,\n            color='r',\n            label='Proposed Velocity Texture Threshold')\n\nplt.xlabel('Velocity texture')\nplt.ylabel('Count')\nplt.legend()","key":"oBbaYbxSU2"},{"type":"output","id":"Zm0FSasQ8O_SUSEtaN5vx","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"6d6e2a7c238868c40a08afdd27adcd09","path":"/radar-cookbook/build/6d6e2a7c238868c40a08afdd27adcd09.png"}}}],"key":"cS1DRinaH1"}],"key":"AOp8lxiCtB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup a Gatefilter Object and Apply our Threshold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zsDcZXpZlJ"}],"identifier":"setup-a-gatefilter-object-and-apply-our-threshold","label":"Setup a Gatefilter Object and Apply our Threshold","html_id":"setup-a-gatefilter-object-and-apply-our-threshold","implicit":true,"key":"oNqvACnTfN"}],"key":"r9JhsxMkCv"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we can set up our GateFilter (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EDBXhBqyZo"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.filters.GateFilter.html#pyart.filters.GateFilter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"pyart.filters.GateFilter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c5Owx51yct"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.filters.GateFilter.html#pyart.filters.GateFilter","key":"cIbwf8wnE5"},{"type":"text","value":"), which allows us to easily apply masks and filters to our radar object.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nQyLLD53BH"}],"key":"IoHufY8QTE"}],"key":"RZaQnpsLgL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gatefilter = pyart.filters.GateFilter(radar)\ngatefilter","key":"Y6IwXCZSSe"},{"type":"output","id":"cm2WDfCmWTqOEiu4ilKLe","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/plain":{"content":"<pyart.filters.gatefilter.GateFilter at 0x7f50220d0490>","content_type":"text/plain"}}}],"key":"fTtG1N4NKE"}],"key":"ysAzkb8t6Z"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We discovered that a velocity texture threshold of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dwtWYaY7WV"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"only including values below 3","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"njIG1vJtTa"}],"key":"ernIJSQjbv"},{"type":"text","value":" would be suitable for this dataset, we use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LnVsXqrVCh"},{"type":"inlineCode","value":".exclude_above","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NdDWgyPGRB"},{"type":"text","value":" method, specifying we want to exclude ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ilw6xGdP7L"},{"type":"inlineCode","value":"texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rKo8fECpIG"},{"type":"text","value":" values above 3.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uA0OlLZPyf"}],"key":"krtJy5O6lo"}],"key":"pmRkM56m3J"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"gatefilter.exclude_above('texture', 3)","key":"Tf4qvA3K6k"},{"type":"output","id":"I58MdY9mnmEp05n_tBPc-","data":[],"key":"iCJ4FKHgX4"}],"key":"XQCQQhvSyL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Filtered Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rom4Gy3bsV"}],"identifier":"plot-our-filtered-data","label":"Plot our Filtered Data","html_id":"plot-our-filtered-data","implicit":true,"key":"zb6Z02DGzm"}],"key":"LXwygIwtJb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have created a gatefilter, filtering our data using the velocity texture, let’s plot our data!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nvAC5jzpYr"}],"key":"L8qAv8JeWC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We need to pass our gatefilter to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xKSvu4P0vD"},{"type":"inlineCode","value":"plot_ppi_map","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TEZ6bUnR4n"},{"type":"text","value":" to apply it to our plot.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Vse45SRo4Q"}],"key":"SU4itlBiWi"}],"key":"hp2C0oOicu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot our Unfiltered Data\nfig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Raw Radial Velocity (no filter)',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17,\n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\n\n# Plot our filtered data\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Radial Velocity with Velocity Texture Filter',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17, \n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     gatefilter=gatefilter,\n                     cmap='balance')\nplt.show()","key":"MrlUjJmezb"},{"type":"output","id":"7gIjfsQFkN-rlWCk0cAAh","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x1000 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"c17f513301e36510fdf0e6df02a9288d","path":"/radar-cookbook/build/c17f513301e36510fdf0e6df02a9288d.png"}}}],"key":"lEPOPQ5gIx"}],"key":"IzCgiCCwbg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dealias the Velocity Using the Region-Based Method","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ix4SbqC65T"}],"identifier":"dealias-the-velocity-using-the-region-based-method","label":"Dealias the Velocity Using the Region-Based Method","html_id":"dealias-the-velocity-using-the-region-based-method","implicit":true,"key":"wMEWGZh8B1"}],"key":"Rr6mzbqe9i"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"At this point, we can use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S6ZcpWSU02"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.correct.dealias_region_based.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"dealias_region_based","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EPtxTsQr0v"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.correct.dealias_region_based.html","key":"Uo6jUrVir4"},{"type":"text","value":" to dealias the velocities and then add the new field to the radar!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VRHScbzi8F"}],"key":"QjqX8dGK0P"}],"key":"R4Glfhadju"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"velocity_dealiased = pyart.correct.dealias_region_based(radar,\n                                                        vel_field='velocity',\n                                                        nyquist_vel=nyquist_value,\n                                                        centered=True,\n                                                        gatefilter=gatefilter)\n\n# Add our data dictionary to the radar object\nradar.add_field('corrected_velocity', velocity_dealiased, replace_existing=True)","key":"Ao3IkA5lJi"},{"type":"output","id":"VgBU_8yIaGl9omXHGgAGP","data":[],"key":"Gx90urdZo1"}],"key":"A27DDcAsGR"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Cleaned, Dealiased Velocities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dFZaXGcPKr"}],"identifier":"plot-our-cleaned-dealiased-velocities","label":"Plot our Cleaned, Dealiased Velocities","html_id":"plot-our-cleaned-dealiased-velocities","implicit":true,"key":"goChr1h1ua"}],"key":"Iybzjd6ewg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the new velocities, which now look much more realistic.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oxF06iIFai"}],"key":"fKEtzTcLyT"}],"key":"TyQDEBT316"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 8])\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('corrected_velocity',\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30, \n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance',\n                     gatefilter=gatefilter)\nplt.show()","key":"ISpC0r9VGt"},{"type":"output","id":"WP_idNZKQjcbBETcspiAm","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x800 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"925c3cb8f54610d8ff10c161dc0d1d91","path":"/radar-cookbook/build/925c3cb8f54610d8ff10c161dc0d1d91.png"}}}],"key":"UBszIzjLxe"}],"key":"UbMHZgyY6T"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compare our Raw Velocity Field to our Dealiased, Cleaned Velocity Field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bPNweE1xkv"}],"identifier":"compare-our-raw-velocity-field-to-our-dealiased-cleaned-velocity-field","label":"Compare our Raw Velocity Field to our Dealiased, Cleaned Velocity Field","html_id":"compare-our-raw-velocity-field-to-our-dealiased-cleaned-velocity-field","implicit":true,"key":"yVqMwQBeRk"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"As a last comparison, let’s compare our raw, uncorrected velocities with our cleaned velocities, after applying the velocity texture threshold and dealiasing algorithm","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rCAMi2AvKV"}],"key":"QAvAvEWiZx"}],"key":"lRw6Iuk9j3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot our Unfiltered Data\nfig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Raw Radial Velocity (no filter)',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30,\n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\n\n# Plot our filtered, dealiased data\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('corrected_velocity',\n                     title='Radial Velocity with Velocity Texture Filter and Dealiasing',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30, \n                     projection=ccrs.PlateCarree(),\n                     gatefilter=gatefilter,\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\nplt.show()","key":"YWMzIztjlU"},{"type":"output","id":"gP6WqNnQIaL9-enneCi0m","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 800x1000 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"a2bb58933790f5428bbe20acb9e01ae2","path":"/radar-cookbook/build/a2bb58933790f5428bbe20acb9e01ae2.png"}}}],"key":"gV9Usu5fKL"}],"key":"O0YPkSaPv8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Conclusions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GE0cBWyj6M"}],"identifier":"conclusions","label":"Conclusions","html_id":"conclusions","implicit":true,"key":"VsmkiJzS0b"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this lesson, we walked through how to apply radial velocity corrections to a dataset, filtering based on the velocity texture and using a regional dealiasing algorithm.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kwL0iqIjE3"}],"key":"Bwm7yVrwLa"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s Next","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Za1rHPEQ6I"}],"identifier":"whats-next","label":"What’s Next","html_id":"whats-next","implicit":true,"key":"hFEvKijJ7d"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In the next few notebooks, we walk through gridding radar data and advanced visualization methods!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zvEVpCiVMK"}],"key":"fH4r8kA2UK"}],"key":"yaciUNATGT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OVEqcUAhUE"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"O6uTHHBSkR"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Py-ART essentials links:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mVRISUPq0f"}],"key":"wgAJ06PxTA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"arm-doe.github.io/pyart/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Landing page","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QNnmlJIbxL"}],"urlSource":"arm-doe.github.io/pyart/","key":"TKWG9ST9dp"}],"key":"Oo9tUJ0eTX"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/index.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Examples","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nQc3FRiy1A"}],"urlSource":"https://arm-doe.github.io/pyart/examples/index.html","key":"fGDCLmh0M2"}],"key":"eRIRMv2lmS"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"github.com/ARM-DOE/pyart","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Source Code","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TzCXCkqpwY"}],"urlSource":"github.com/ARM-DOE/pyart","error":true,"key":"NFBGyd7tnK"}],"key":"jVYcMqOuXt"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"groups.google.com/group/pyart-users/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Mailing list","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Ngp3eqfnP1"}],"urlSource":"groups.google.com/group/pyart-users/","key":"ieBfx3qFhf"}],"key":"co7W4LyGEy"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"github.com/ARM-DOE/pyart/issues","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Issue Tracker","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"NUHjjftOMB"}],"urlSource":"github.com/ARM-DOE/pyart/issues","error":true,"key":"zeYCswRkNx"}],"key":"XTkRlYNeEN"}],"key":"vipwJjOJu3"}],"key":"FWb0n538Ek"}],"key":"ZrymowSSGK"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Py-ART Basics","url":"/pyart-basics","group":"Radar Software Foundations"},"next":{"title":"Py-ART Gridding","url":"/pyart-gridding","group":"Radar Software Foundations"}}},"domain":"http://localhost:3000"}