{"version":2,"kind":"Notebook","sha256":"187dd29fc7ece5b19a1e6afcd04be12abeaac2344cde3cd5c59de4d630707560","slug":"echo-top-height","location":"/notebooks/example-workflows/echo_top_height.ipynb","dependencies":[],"frontmatter":{"title":"Echo top height calculation from NEXRAD PPI volume data:","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Zachary Sherman","given":"Zachary","family":"Sherman"},"name":"Zachary Sherman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Milind Sharma","given":"Milind","family":"Sharma"},"name":"Milind Sharma","id":"contributors-myst-generated-uid-2"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/radar-cookbook","copyright":"2024","abbreviations":{"ARM":"Atmospheric Radiation Measurement"},"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/radar-cookbook/blob/HEAD/notebooks/example-workflows/echo_top_height.ipynb","exports":[{"format":"ipynb","filename":"echo_top_height.ipynb","url":"/radar-cookbook/build/echo_top_height-5a0520401c87b84f1b95856eb50b73b6.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"An echo top is the radar indicated top of an area of precipitation. This notebook demonstrates how to calculate the echo top height (ETH) in a NEXRAD PPI volume scan to determine the maximum elevation angle at which a certain reflectivity threshold is exceeded.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UQfUlvUClN"}],"key":"DEclWluYuR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This example uses the echo top height (ETH) calculation code written by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OG9Kb5HaNU"},{"type":"link","url":"https://github.com/vlouf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Valentin Louf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zkP0xy8pf1"}],"urlSource":"https://github.com/vlouf","error":true,"key":"KHuHk1Hj3s"},{"type":"text","value":", available at this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ti1Hna9NWa"},{"type":"link","url":"https://github.com/vlouf/eth_radar.git","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"github repository","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yYYrDdVL6l"}],"urlSource":"https://github.com/vlouf/eth_radar.git","error":true,"key":"Yq8RdG7eUp"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xvwpLOwl49"}],"key":"VNj1lKcUcM"}],"visibility":"show","key":"tMiXpZRXlk"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hx74BiUl6A"}],"key":"Ha0ucJ9Lit"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JgpPbrsi44"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"EarNrv7yoS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The notebook applies the modified ETH algorithm proposed by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"p8lcEVK9zu"},{"type":"link","url":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Lakshmanan et al. (2013)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kpL3tmOspB"}],"urlSource":"https://journals.ametsoc.org/view/journals/wefo/28/2/waf-d-12-00084_1.xml","key":"QbiUQb4xz9"},{"type":"text","value":" to a NEXRAD PPI volume scan.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SHRjBak0mm"}],"key":"N7O8qNjB3p"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The modified algorithm comprises these steps:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Y6FUyKeY4I"}],"key":"rrGuoZj9P9"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Find the maximum elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"MgPpLmvYxo"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"NpF3qLmtQq"},{"type":"text","value":") where reflectivity (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wd4uKyAtad"},{"type":"inlineMath","value":"Z_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"oXmTUFa4cC"},{"type":"text","value":") exceeds the echo-top reflectivity threshold.\nIf ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zVSZ9bkZ2N"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"kAvBkNKwMN"},{"type":"text","value":" is not the highest elevation scan in the virtual volume, obtain the reflectivity value (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Z3Or28hCQs"},{"type":"inlineMath","value":"Z_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"PtN9MXLmO0"},{"type":"text","value":") at the next higher elevation angle (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"aGoDgSZLOb"},{"type":"inlineMath","value":"\\theta_{a}","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"Qwo2a9micH"},{"type":"text","value":"). Then, the echo-top height is given by the height of the radar beam at an elevation angle:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"h8r5ydbnwR"}],"key":"dElepjDxs3"}],"key":"RVQK2E4Xl7"},{"type":"math","value":"\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>Z</mi><mi>T</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub><mo stretchy=\"false\">)</mo><mfrac><mrow><msub><mi>θ</mi><mi>b</mi></msub><mo>−</mo><msub><mi>θ</mi><mi>a</mi></msub></mrow><mrow><msub><mi>Z</mi><mi>b</mi></msub><mo>−</mo><msub><mi>Z</mi><mi>a</mi></msub></mrow></mfrac><mo>+</mo><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_T = (Z_T - Z_a) \\frac{\\theta_b - \\theta_a}{Z_b - Z_a} + \\theta_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2074em;vertical-align:-0.836em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.836em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>","enumerator":"1","key":"RgMN0fEwsl"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Lqmi5jRIWs"},{"type":"inlineMath","value":"Z_T","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"lizPXxcNwc"},{"type":"text","value":" is the threshold value (e.g., 0 dBZ, 18 dBZ) used to compute the echo top.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"T1a7KJsGUU"}],"key":"ORM5Cd2Ih3"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"If ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"b74CKOn15F"},{"type":"inlineMath","value":"\\theta_{b}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"JSMSl8G8ja"},{"type":"text","value":" is the highest elevation scan available, set ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"HAiYnZM0sc"},{"type":"inlineMath","value":"\\theta_{T} = \\theta_{b} + \\beta/2","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub><mo>=</mo><msub><mi>θ</mi><mi>b</mi></msub><mo>+</mo><mi>β</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\theta_{T} = \\theta_{b} + \\beta/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord\">/2</span></span></span></span>","key":"AuvzrtgmKH"},{"type":"text","value":", where ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"UphNO8AGZx"},{"type":"text","value":"β","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"CWuaJwqOfk"},{"type":"text","value":" is the half-power beamwidth. This condition is met far away from the radar if higher-elevation scans have shorter ranges than a base “surveillance” scan and very close to the radar if the highest-elevation scan does not sample the top of the cloud. Under these circumstances, ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ptD0ojrwpq"},{"type":"inlineMath","value":"\\theta_{T}","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"JOdgzcjZ2g"},{"type":"text","value":" is set to be the top of the beam containing dBZ ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"o6oEUXKA3o"},{"type":"inlineMath","value":"\\geq Z_T","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><msub><mi>Z</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\geq Z_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"bAlfJfD7K3"},{"type":"text","value":"; that is, the traditional echo-top algorithm is followed when there are no data available from a higher-elevation scan.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ZeCUoKu8IX"}],"key":"JtKp20lFZ3"}],"key":"aQKghZw6dE"}],"key":"hKZhU9rIQ5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QtIcHOSlbe"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"Kwq2kravgm"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vFO7G29JqY"}],"key":"uOGW53AR1K"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AbBfnTwvU9"}],"key":"r0qok1mXyj"},{"type":"tableCell","header":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ue4nYzqfx1"}],"key":"JJd76oBu4t"}],"key":"yqHJ9nlCiV"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Bn56qfJJZQ"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","key":"nulz6aC0uG"}],"key":"I3clp0aLQF"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yEHEaEWiOs"}],"key":"UBa7XtQCLY"},{"type":"tableCell","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sAvazNlvHq"}],"key":"zeCaOGzUfG"}],"key":"kU0v5dtvJ5"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/cartopy/cartopy.html","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Intro to Cartopy","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"H7sbzxc8Tl"}],"urlSource":"https://foundations.projectpythia.org/core/cartopy/cartopy.html","key":"tGM9P1J2sQ"}],"key":"qRqO1ALcd4"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"d1p7yUXREN"}],"key":"etHP1ZjHPG"},{"type":"tableCell","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Geospatial plotting","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KwFJAtqSXj"}],"key":"Ee1ANDeCnU"}],"key":"fifVl4QPYA"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"/pyart-basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OKaM5LKzNh"}],"urlSource":"../foundations/pyart-basics","dataUrl":"/pyart-basics.json","internal":true,"protocol":"file","key":"MKF48bWCtk"}],"key":"kjRlBizek4"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"kB7oBi1n0l"}],"key":"MpCggL7MzI"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"IO/Visualization","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JKfavCultC"}],"key":"bsDIHxmHTo"}],"key":"en2QpjOYXm"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://numba.pydata.org/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Numba","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yPTAg8l6wb"}],"urlSource":"https://numba.pydata.org/","key":"dlxarxK2Ic"}],"key":"lkDDg2zKBt"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qi150Jjmkh"}],"key":"fXxhjc5zM4"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Familiarity with vectorization/optimization of Python functions","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"gXH9UDWXkz"}],"key":"XBMqsduTnJ"}],"key":"Sl9s2pqfyT"}],"key":"uw2bVM1pzi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"SEw8fd77GR"}],"key":"VWSglefOpG"},{"type":"text","value":": 25 minutes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"naJktqrrHu"}],"key":"eWHuQMvW6d"}],"key":"ogSGmbMXoA"}],"key":"lnDNUhKr8Q"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qlg7Xcjh5B"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"qwicpsE9rK"}],"key":"U8taJdpovh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pyart\nimport numpy as np\nfrom echotop import cloud_top_height, grid_cloud_top\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs","visibility":"show","key":"xv01K7O6cM"},{"type":"output","id":"9_zlwqrwMCj__wvdZOxAP","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"visibility":"show","key":"zEKCRF2gQj"}],"visibility":"show","key":"HfG1coWyHc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define our function to compute ETH on a uniform x-y grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ERum6bF3nG"}],"identifier":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","label":"Define our function to compute ETH on a uniform x-y grid","html_id":"define-our-function-to-compute-eth-on-a-uniform-x-y-grid","implicit":true,"key":"yHuEn0x8q3"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The input file can be a Next Generation Weather Radar (NEXRAD) archive file from Amazon Web Services. We will remotely access  this file and use a reflectivity threshold ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cxt9yUlsZF"},{"type":"inlineCode","value":"eth_thld","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aa8F5hpqaI"},{"type":"text","value":" to define our echo tops.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PvLEH4M9zG"}],"key":"qZYGccWNbj"}],"key":"Q8UC8bIFiS"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def compute_eth(infile, eth_thld=0):\n    \"\"\"\n    Compute the Echo Top Height on a grid\n    \n    Parameters\n    ==========\n    infile (str): Filename of NEXRAD Level 2 Archive file. The files hosted by\n    at the NOAA National Climate Data Center [1]_ as well as on the\n    UCAR THREDDS Data Server [2]_ have been tested. Other NEXRAD\n    Level 2 Archive files may or may not work. Message type 1 file\n    and message type 31 files are supported.\n    \n    eth_thld (float): Reflectivity threshold for which we want to compute \n    the echo top height.\n        \n    Returns:\n    ========\n    cth_grid: ndarray <x, y>\n        Echo top height on a grid of dimension (x, y).  \n        \n    References\n    ----------\n    .. [1] http://www.ncdc.noaa.gov/\n    .. [2] http://thredds.ucar.edu/thredds/catalog.html\n    \"\"\"\n    # Reading NEXRAD L2 data stored on AWS cloud\n    \n    radar = pyart.io.read_nexrad_archive(infile)\n\n    r = radar.range['data']\n    azimuth = radar.azimuth['data']\n    elevation = radar.elevation['data']\n    refl = np.array(radar.fields['reflectivity']['data'])\n    st_sweep = radar.sweep_start_ray_index['data']\n    ed_sweep = radar.sweep_end_ray_index['data']\n\n    # Compute ETH. The 'echotop' package uses @jit decorator to optimize \n    # the 'cloud_top_height' function\n    cth = cloud_top_height(r, azimuth, elevation, st_sweep, ed_sweep, refl, eth_thld=eth_thld)\n\n    # Grid data\n    th = 450 - azimuth[slice(st_sweep[0], ed_sweep[0] + 1)]\n    th[th < 0] += 360\n\n    R, A = np.meshgrid(r, th)\n    x = R * np.cos(np.pi * A / 180)\n    y = R * np.sin(np.pi * A / 180)\n\n    xgrid = np.arange(-MAX_RANGE, MAX_RANGE + RANGE_STEP / 2, RANGE_STEP).astype(np.int32)\n    [X, Y] = np.meshgrid(xgrid, xgrid)\n    cth_grid = grid_cloud_top(\n        cth, x, y, X, Y, nnearest=24, maxdist=2500\n    )  # nearest=24 should be enough to sample out to 2500m on a 1000m grid\n    cth_grid = np.ma.masked_invalid(cth_grid).astype(np.int32).filled(FILLVALUE)\n\n    return cth_grid","visibility":"show","key":"MUINKBrkJW"},{"type":"output","id":"lj_62RKQUxIo1HWOmo2Gg","data":[],"visibility":"show","key":"pAXkc1S5mE"}],"visibility":"show","key":"aTYTuTpx7Y"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read and plot reflectivity and velocity fields for a sample file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YZ0zjIL3Vt"}],"identifier":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","label":"Read and plot reflectivity and velocity fields for a sample file","html_id":"read-and-plot-reflectivity-and-velocity-fields-for-a-sample-file","implicit":true,"key":"wVwN044oHy"}],"key":"avQGYQrv86"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"aws_nexrad_level2_file = (\n    \"s3://noaa-nexrad-level2/2022/03/22/KHGX/KHGX20220322_120125_V06\"\n)\n\nradar = pyart.io.read_nexrad_archive(aws_nexrad_level2_file)\n\n\nfig = plt.figure(figsize=(12, 4))\ndisplay = pyart.graph.RadarMapDisplay(radar)\n\nax = plt.subplot(121, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"reflectivity\",\n    sweep=0,\n    ax=ax,\n    colorbar_label=\"Equivalent Relectivity ($Z_{e}$) \\n (dBZ)\",\n    vmin=-20,\n    vmax=60,\n)\n\nax = plt.subplot(122, projection=ccrs.PlateCarree())\n\ndisplay.plot_ppi_map(\n    \"velocity\",\n    sweep=1,\n    ax=ax,\n    colorbar_label=\"Radial Velocity ($V_{r}$) \\n (m/s)\",\n    vmin=-70,\n    vmax=70,\n)","visibility":"show","key":"aNldOpDQY2"},{"type":"output","id":"Q7cMMLm7vfjrr2oYWRJx_","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1200x400 with 4 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"9aadcadf4861fde1a1085674ed2110ec","path":"/radar-cookbook/build/9aadcadf4861fde1a1085674ed2110ec.png"}}}],"visibility":"show","key":"jwXioC8gJC"}],"visibility":"show","key":"zFYVM5LzrH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define some global constants and compute the ETH on a horizontally uniform grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YsvkspgCLb"}],"identifier":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","label":"Define some global constants and compute the ETH on a horizontally uniform grid","html_id":"define-some-global-constants-and-compute-the-eth-on-a-horizontally-uniform-grid","implicit":true,"key":"NnD99U8XzU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"These constants are required by the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nV8fBmM7K4"},{"type":"inlineCode","value":"compute_eth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rZ6a5BDjW4"},{"type":"text","value":" function to grid the data from polar coordinates to a horizontally uniform grid. These three constants are defined as:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jatoey0Kix"}],"key":"V9Zw5zEUTb"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"FILLVALUE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"X86w52iXwq"},{"type":"text","value":" (Value to replace missing data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nJqKoZiTFe"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fhRTf1Q8mb"},{"type":"inlineCode","value":"RANGE_STEP","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KNXjwZE3An"},{"type":"text","value":" (Uniform horizontal grid spacing in x and y dimensions)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"j6ImAvyG6l"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"haTKV3kZpy"},{"type":"inlineCode","value":"MAX_RANGE","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Gf30yDAuJ6"},{"type":"text","value":" (Maximum range up to which ETH to be calculated from gridded data)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"g76kvy5pYv"}],"key":"q5XjuOp2Bv"}],"key":"lGlzOFRuve"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"FILLVALUE: int = -9999 \nRANGE_STEP: int = 1000 \nMAX_RANGE: float = 250e3 \n\ncth_grid = compute_eth(aws_nexrad_level2_file, eth_thld=20)","visibility":"show","key":"pfCcBtcxlW"},{"type":"output","id":"fQV3SGOFTOCF_Zn3q4b_4","data":[],"visibility":"show","key":"EejkHMv8BV"}],"visibility":"show","key":"zkcFQHP9i0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the gridded echo/cloud top height using matplotlib","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lEctGAmOvd"}],"identifier":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","label":"Plot the gridded echo/cloud top height using matplotlib","html_id":"plot-the-gridded-echo-cloud-top-height-using-matplotlib","implicit":true,"key":"gIMJqHyrlB"}],"key":"CsywY6HMRk"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"p = plt.pcolormesh(cth_grid,\n                   vmin=0,\n                   vmax=15000,\n                   cmap='ChaseSpectral')\n\nplt.colorbar(mappable=p)","visibility":"show","key":"LXuS78IOVS"},{"type":"output","id":"4Bt49-hgQp42F3F4bxCTr","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"223a455a3954fdb0fdc2de94086a869b","path":"/radar-cookbook/build/223a455a3954fdb0fdc2de94086a869b.png"}}}],"visibility":"show","key":"P2wUeBvLBL"}],"visibility":"show","key":"wUU9UdKKRP"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TqYqNGwokL"}],"key":"mCCR0hmUDF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p860VhiNMQ"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"fXP8pQxLl9"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this example, we walked through how to access ","key":"PWJeO0kB09"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"GV4p1rfOb8"}],"key":"UEy0a2kdi2"},{"type":"text","value":" data from a field campaign in Texas, plot a quick look of the RHI scan data, and grid our RHI data from native (polar) coordinates to a uniform range-height Caretsian grid.","key":"THImsrrLZ2"}],"key":"dA5LsTssuW"}],"key":"UWeqI1r5GB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fu8AaaO2z7"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"lhXff2E9Bg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"link","url":"https://registry.opendata.aws/noaa-nexrad/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"NOAA NEXRAD on AWS","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"OJkMAjvkhf"}],"urlSource":"https://registry.opendata.aws/noaa-nexrad/","key":"nbN61S1p7c"}],"key":"ziPGiq2ape"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Read NEXRAD on AWS","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R59zMQMFqo"}],"urlSource":"https://arm-doe.github.io/pyart/examples/io/plot_nexrad_data_aws.html","key":"uG7e8tzy0Q"}],"key":"f1n7WxbU4r"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Py-ART:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"A4o8UlNxKR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus, J.J. & Collis, S.M., (2016). The Python ","key":"cics8Pro96"},{"type":"abbreviation","title":"Atmospheric Radiation Measurement","children":[{"type":"text","value":"ARM","key":"ZpEKZ1l9GC"}],"key":"BU6wPNDCxL"},{"type":"text","value":" Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. Journal of Open Research Software. 4(1), p.e25. DOI: ","key":"p2ImWb48qc"},{"type":"cite","url":"http://doi.org/10.5334/jors.119","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Helmus & Collis (2016)","key":"pdTtGmA8sy"}],"kind":"narrative","label":"Helmus_2016","identifier":"http://doi.org/10.5334/jors.119","enumerator":"1","key":"iBX0yt1eKi"}],"key":"vMb8hXQrPv"}],"key":"Owj5IV6i8H"}],"key":"GLG0pLd4Ur"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Echo-top height algorithm:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"APFcZzR2fK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An improved method for estimating radar echo-top height. Weather and Forecasting, 28(2), 481-488. DOI: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Aqe8UqIIWk"},{"type":"cite","url":"https://doi.org/10.1175/WAF-D-12-00084.1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Lakshmanan ","key":"ftOoYeZriJ"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"kONOZroYM2"}],"key":"falQYPDEGK"},{"type":"text","value":" (2013)","key":"dDHuG6Ia9E"}],"kind":"narrative","label":"Lakshmanan_2013","identifier":"https://doi.org/10.1175/WAF-D-12-00084.1","enumerator":"2","key":"BCDgTmvsMO"}],"key":"SfEfxj8Xos"}],"key":"PtY1An6beE"}],"key":"KGxufxR6L6"}],"key":"Br2yVV0aLi"}],"key":"xt29lHtibf"}],"key":"ZrtMvtzmHf"},"references":{"cite":{"order":["Helmus_2016","Lakshmanan_2013"],"data":{"Helmus_2016":{"label":"Helmus_2016","enumerator":"1","doi":"10.5334/jors.119","html":"Helmus, J. J., & Collis, S. M. (2016). The Python ARM Radar Toolkit (Py-ART), a Library for Working with Weather Radar Data in the Python Programming Language. <i>Journal of Open Research Software</i>, <i>4</i>(1), 25. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.5334/jors.119\">10.5334/jors.119</a>","url":"https://doi.org/10.5334/jors.119"},"Lakshmanan_2013":{"label":"Lakshmanan_2013","enumerator":"2","doi":"10.1175/waf-d-12-00084.1","html":"Lakshmanan, V., Hondl, K., Potvin, C. K., & Preignitz, D. (2013). An Improved Method for Estimating Radar Echo-Top Height. <i>Weather and Forecasting</i>, <i>28</i>(2), 481–488. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1175/waf-d-12-00084.1\">10.1175/waf-d-12-00084.1</a>","url":"https://doi.org/10.1175/waf-d-12-00084.1"}}}},"footer":{"navigation":{"prev":{"title":"2D objective analysis of weather radar RHI scan: Fast Barnes Interpolation Example","url":"/fastbarnes-interpolation-rhi","group":"Example Workflows"}}},"domain":"http://localhost:3000"}